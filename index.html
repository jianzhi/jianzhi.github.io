
 <!DOCTYPE HTML>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
  
    <title>Joey çš„å‰å…‰ç‰‡ç¾½</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="Joey">
    

    
    <meta name="description" content="ç”Ÿæ´»ä¸åªè¯—å’Œè¿œæ–¹ï¼Œè¿˜æœ‰çœ¼å‰çš„è‹Ÿä¸”">
<meta property="og:type" content="website">
<meta property="og:title" content="Joey çš„å‰å…‰ç‰‡ç¾½">
<meta property="og:url" content="https://jianzhi.github.io/index.html">
<meta property="og:site_name" content="Joey çš„å‰å…‰ç‰‡ç¾½">
<meta property="og:description" content="ç”Ÿæ´»ä¸åªè¯—å’Œè¿œæ–¹ï¼Œè¿˜æœ‰çœ¼å‰çš„è‹Ÿä¸”">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Joey çš„å‰å…‰ç‰‡ç¾½">
<meta name="twitter:description" content="ç”Ÿæ´»ä¸åªè¯—å’Œè¿œæ–¹ï¼Œè¿˜æœ‰çœ¼å‰çš„è‹Ÿä¸”">

    
    <link rel="alternative" href="/atom.xml" title="Joey çš„å‰å…‰ç‰‡ç¾½" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="Joey çš„å‰å…‰ç‰‡ç¾½" title="Joey çš„å‰å…‰ç‰‡ç¾½"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="Joey çš„å‰å…‰ç‰‡ç¾½">Joey çš„å‰å…‰ç‰‡ç¾½</a></h1>
				<h2 class="blog-motto">ççœ¼çœ‹ä¸–ç•Œ</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:jianzhi.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main">

   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/07/08/iOS-æ•°æ®åº“æ¡†æ¶-FMDB-åˆ†æ/" title="iOS æ•°æ®åº“æ¡†æ¶ FMDB åˆ†æ" itemprop="url">iOS æ•°æ®åº“æ¡†æ¶ FMDB åˆ†æ</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Joey" target="_blank" itemprop="author">Joey</a>
		
  <p class="article-time">
    <time datetime="2017-07-08T14:34:27.000Z" itemprop="datePublished"> Published 2017-07-08</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="https://github.com/ccgus/fmdb">FMDB</a> æ¡†æ¶ç”¨ Objective-C è¯­æ³•å°è£…äº† SQLite çš„ C è¯­è¨€ APIï¼Œä½¿å¾—æ“ä½œæ•°æ®åº“æ›´åŠ æ–¹ä¾¿ï¼Œé¢å‘å¯¹è±¡ã€‚åœ¨æ­¤ç»“åˆä½¿ç”¨æ¥åˆ†æ FMDB çš„å°è£…å®ç°ï¼š</p>
<h5 id="ä¸»è¦çš„å‡ ä¸ªç±»ï¼š"><a href="#ä¸»è¦çš„å‡ ä¸ªç±»ï¼š" class="headerlink" title="ä¸»è¦çš„å‡ ä¸ªç±»ï¼š"></a>ä¸»è¦çš„å‡ ä¸ªç±»ï¼š</h5><ul>
<li><code>FMDatabase</code>:ä»£è¡¨ä¸€ä¸ª SQLite æ•°æ®åº“å®ä¾‹ï¼Œç”¨äºæ‰§è¡Œ SQL è¯­å¥ã€‚</li>
<li><code>FMResultSet</code>:ä»£è¡¨åœ¨<code>FMDatabase</code>ä¸­æ‰§è¡ŒæŸ¥è¯¢åçš„ç»“æœé›†ã€‚</li>
<li><code>FMDatabaseQueue</code>:ç”¨äºå¤šçº¿ç¨‹è¯»å†™æ•°æ®åº“ã€‚</li>
</ul>
<h5 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h5><p>ä¸»è¦é€šè¿‡<code>FMDatabase</code>çš„<code>databaseWithPath</code>æ–¹æ³•ï¼Œä½†æ­¤æ—¶å¹¶æ²¡æœ‰çœŸæ­£åˆ›å»ºæ•°æ®åº“ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">+ (instancetype)databaseWithPath:(NSString*)aPath &#123;</div><div class="line">    return FMDBReturnAutoreleased([[self alloc] initWithPath:aPath]);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (instancetype)initWithPath:(NSString*)aPath &#123;</div><div class="line">    </div><div class="line">    assert(sqlite3_threadsafe()); // whoa there big boy- gotta make sure sqlite it happy with what we&apos;re going to do.</div><div class="line">    </div><div class="line">    self = [super init];</div><div class="line">    </div><div class="line">    if (self) &#123;</div><div class="line">        _databasePath               = [aPath copy];</div><div class="line">        _openResultSets             = [[NSMutableSet alloc] init];</div><div class="line">        _db                         = nil;</div><div class="line">        _logsErrors                 = YES;</div><div class="line">        _crashOnErrors              = NO;</div><div class="line">        _maxBusyRetryTimeInterval   = 2;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return self;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œç”¨åˆ°äº†<code>sqlite3_threadsafe()</code>æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­ç¼–è¯‘é˜¶æ®µ<code>SQLite</code>æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼›<br><code>SQLite</code>æœ‰ä¸‰ç§çº¿ç¨‹æ¨¡å¼ï¼š</p>
<ul>
<li>å•çº¿ç¨‹(Single-thread)ï¼šæ‰€æœ‰äº’æ–¥é”(mutex)éƒ½è¢«ç¦ç”¨ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—® SQLite æ˜¯ä¸å®‰å…¨çš„ã€‚</li>
<li>å¤šçº¿ç¨‹(Multi-thread)ï¼šä¸€ä¸ªæ•°æ®åº“è¿æ¥åŒä¸€æ—¶é—´å†…åªæœ‰ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨å°±æ˜¯å®‰å…¨çš„ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶ä½¿ç”¨åŒä¸€ä¸ªè¿æ¥å°±æ˜¯ä¸å®‰å…¨çš„ã€‚</li>
<li>ä¸²è¡Œ(Serialized)ï¼š    å¼€å¯æ‰€æœ‰é”ï¼Œå¯ä»¥è¢«å¤šä¸ªçº¿ç¨‹ä»»æ„è®¿é—®ã€‚</li>
</ul>
<p>åœ¨ iOS ä¸­ç¼–è¯‘<code>SQlite</code>æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯å¤šçº¿ç¨‹æ¨¡å¼ï¼Œsqlite3_threadsafe() æ–¹æ³•è¿”å›çš„æ˜¯ 2ã€‚å¦‚æœè¿”å› 0 åˆ™ä»£è¡¨æ˜¯å•çº¿ç¨‹æ¨¡å¼ï¼Œè¿”å› 1 ä»£è¡¨æ˜¯ä¸²è¡Œæ¨¡å¼ã€‚</p>
<p>è¦æƒ³è®¾ç½®SQliteçš„çº¿ç¨‹æ¨¡å¼ï¼Œæœ‰å¾ˆå¤šç§æ–¹å¼ï¼š</p>
<ul>
<li>ç¼–è¯‘æœŸè®¾å®šï¼š é€šè¿‡ SQLITE_THREADSAFE è¿™ä¸ªå‚æ•°è¿›è¡Œç¼–è¯‘å™¨çš„è®¾ç½®æ¥é€‰æ‹©çº¿ç¨‹æ¨¡å‹</li>
<li>åˆå§‹åŒ–è®¾å®šï¼š é€šè¿‡è°ƒç”¨ sqlite3_config() å¯ä»¥åœ¨ SQLite åˆå§‹åŒ–æ—¶è®¾ç½®ï¼Œä¾‹å¦‚æƒ³è¦è®¾ç½®ä¸²è¡Œæ¨¡å¼ï¼š<code>sqlite3_config(SQLITE_CONFIG_SINGLETHREAD);</code></li>
<li>è¿è¡Œæ—¶è®¾å®šï¼š é€šè¿‡è°ƒç”¨ sqlite3_open_v2() æ–¹æ³•æŒ‡å®šæ•°æ®åº“è¿æ¥çš„æ•°æ®åº“çº¿ç¨‹æ¨¡å¼</li>
</ul>
<h5 id="æ‰“å¼€æ•°æ®åº“"><a href="#æ‰“å¼€æ•°æ®åº“" class="headerlink" title="æ‰“å¼€æ•°æ®åº“"></a>æ‰“å¼€æ•°æ®åº“</h5><p>åœ¨æ“ä½œæ•°æ®åº“ä¹‹å‰ï¼Œå¿…é¡»å…ˆæ‰“å¼€æ•°æ®åº“ï¼Œä½¿ç”¨<code>FMDatabase</code>çš„<code>open</code>æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div></pre></td><td class="code"><pre><div class="line">- (BOOL)open &#123;</div><div class="line">    if (_db) &#123;</div><div class="line">        return YES;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    int err = sqlite3_open([self sqlitePath], (sqlite3**)&amp;_db );</div><div class="line">    if(err != SQLITE_OK) &#123;</div><div class="line">        NSLog(@&quot;error opening!: %d&quot;, err);</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    if (_maxBusyRetryTimeInterval &gt; 0.0) &#123;</div><div class="line">        // set the handler</div><div class="line">        [self setMaxBusyRetryTimeInterval:_maxBusyRetryTimeInterval];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return YES;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)setMaxBusyRetryTimeInterval:(NSTimeInterval)timeout &#123;</div><div class="line">    </div><div class="line">    _maxBusyRetryTimeInterval = timeout;</div><div class="line">    </div><div class="line">    if (!_db) &#123;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    if (timeout &gt; 0) &#123;//è®¾ç½®é‡è¯•çš„å›è°ƒ</div><div class="line">        sqlite3_busy_handler(_db, &amp;FMDBDatabaseBusyHandler, (__bridge void *)(self));</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        // turn it off otherwise</div><div class="line">        sqlite3_busy_handler(_db, nil, nil);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">static int FMDBDatabaseBusyHandler(void *f, int count) &#123;</div><div class="line">    FMDatabase *self = (__bridge FMDatabase*)f;</div><div class="line">    </div><div class="line">    if (count == 0) &#123;//å›è°ƒæ¬¡æ•°ä¸º0ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æ˜¯ç¬¬ä¸€æ¬¡å›è°ƒ</div><div class="line">        self-&gt;_startBusyRetryTime = [NSDate timeIntervalSinceReferenceDate];</div><div class="line">        return 1; //è¿”å›1è¡¨ç¤ºç»§ç»­é‡è¯•</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    NSTimeInterval delta = [NSDate timeIntervalSinceReferenceDate] - (self-&gt;_startBusyRetryTime);</div><div class="line">    </div><div class="line">    if (delta &lt; [self maxBusyRetryTimeInterval]) &#123;//å°äºæœ€å¤§é‡è¯•æ—¶é—´ï¼Œç»§ç»­é‡è¯•</div><div class="line">        int requestedSleepInMillseconds = (int) arc4random_uniform(50) + 50;</div><div class="line">        int actualSleepInMilliseconds = sqlite3_sleep(requestedSleepInMillseconds);</div><div class="line">        if (actualSleepInMilliseconds != requestedSleepInMillseconds) &#123;</div><div class="line">            NSLog(@&quot;WARNING: Requested sleep of %i milliseconds, but SQLite returned %i. Maybe SQLite wasn&apos;t built with HAVE_USLEEP=1?&quot;, requestedSleepInMillseconds, actualSleepInMilliseconds);</div><div class="line">        &#125;</div><div class="line">        return 1;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œï¼Œä½¿ç”¨ sqlite3_busy_handler æ³¨å†Œäº†ä¸€ä¸ªå›è°ƒå¤„ç† SQLITE_BUSY çš„é”™è¯¯æƒ…å†µï¼Œä¹Ÿå°±æ˜¯å½“å…¶ä»–çº¿ç¨‹æˆ–è¿›ç¨‹æ­£åœ¨è¯»å†™æ•°æ®åº“é”ä½äº†æ•°æ®è¡¨çš„æ—¶å€™ï¼Œå°±ä¼šå›è°ƒ FMDBDatabaseBusyHandler æ–¹æ³•ï¼ŒFMDBDatabaseBusyHandler é‡Œé¢è®¾ç½®äº†æœ€å¤§é‡è¯•æ—¶é—´ï¼Œè¶…æ—¶åå°±ä¸å†é‡è¯•ã€‚<br>iOS APP éƒ½æ˜¯å•è¿›ç¨‹çš„ï¼Œé‚£ä¹ˆå°±åªæœ‰å¤šçº¿ç¨‹å¤šå¥æŸ„çš„æƒ…å†µä¸‹è¯»å†™æ•°æ®åº“ï¼Œæ‰ä¼šå‡ºç°è¿™ç§ sqlite_busy çš„æƒ…å†µäº†ã€‚</p>
<h5 id="æ‰§è¡Œæ›´æ–°æ“ä½œ"><a href="#æ‰§è¡Œæ›´æ–°æ“ä½œ" class="headerlink" title="æ‰§è¡Œæ›´æ–°æ“ä½œ"></a>æ‰§è¡Œæ›´æ–°æ“ä½œ</h5><p>è¿™é‡Œæ›´æ–°æ“ä½œåŒ…æ‹¬äº†å¢åˆ æ”¹ç­‰ï¼Œæ–¹æ³•å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div></pre></td><td class="code"><pre><div class="line">- (BOOL)executeUpdate:(NSString*)sql error:(NSError**)outErr withArgumentsInArray:(NSArray*)arrayArgs orDictionary:(NSDictionary *)dictionaryArgs orVAList:(va_list)args &#123;</div><div class="line">    ......</div><div class="line">    if (_isExecutingStatement) &#123;</div><div class="line">        [self warnInUse];</div><div class="line">        return NO;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    _isExecutingStatement = YES;</div><div class="line">    </div><div class="line">    int rc                   = 0x00;</div><div class="line">    sqlite3_stmt *pStmt      = 0x00;</div><div class="line">    FMStatement *cachedStmt  = 0x00;</div><div class="line">    </div><div class="line">    ......</div><div class="line">    </div><div class="line">    if (_shouldCacheStatements) &#123;//ä½¿ç”¨ç¼“å­˜ä¸­ç¼–è¯‘åçš„SQLè¯­å¥</div><div class="line">        cachedStmt = [self cachedStatementForQuery:sql];</div><div class="line">        pStmt = cachedStmt ? [cachedStmt statement] : 0x00;</div><div class="line">        [cachedStmt reset];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    if (!pStmt) &#123;</div><div class="line">        rc = sqlite3_prepare_v2(_db, [sql UTF8String], -1, &amp;pStmt, 0); //é¢„å¤„ç†SQLè¯­å¥</div><div class="line">        </div><div class="line">        if (SQLITE_OK != rc) &#123;</div><div class="line">            ......</div><div class="line">            </div><div class="line">            sqlite3_finalize(pStmt);</div><div class="line">            </div><div class="line">            _isExecutingStatement = NO;</div><div class="line">            return NO;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    id obj;</div><div class="line">    int idx = 0;</div><div class="line">    int queryCount = sqlite3_bind_parameter_count(pStmt);</div><div class="line">    </div><div class="line">    if (dictionaryArgs) &#123;</div><div class="line">        </div><div class="line">        for (NSString *dictionaryKey in [dictionaryArgs allKeys]) &#123;</div><div class="line">            </div><div class="line">            // Prefix the key with a colon.</div><div class="line">            NSString *parameterName = [[NSString alloc] initWithFormat:@&quot;:%@&quot;, dictionaryKey];</div><div class="line">            </div><div class="line">            if (_traceExecution) &#123;</div><div class="line">                NSLog(@&quot;%@ = %@&quot;, parameterName, [dictionaryArgs objectForKey:dictionaryKey]);</div><div class="line">            &#125;</div><div class="line">            // Get the index for the parameter name.</div><div class="line">            int namedIdx = sqlite3_bind_parameter_index(pStmt, [parameterName UTF8String]);</div><div class="line">            </div><div class="line">            FMDBRelease(parameterName);</div><div class="line">            </div><div class="line">            if (namedIdx &gt; 0) &#123;</div><div class="line">                // Standard binding from here.</div><div class="line">                [self bindObject:[dictionaryArgs objectForKey:dictionaryKey] toColumn:namedIdx inStatement:pStmt];</div><div class="line">                </div><div class="line">                // increment the binding count, so our check below works out</div><div class="line">                idx++;</div><div class="line">            &#125;</div><div class="line">            else &#123;</div><div class="line">                NSString *message = [NSString stringWithFormat:@&quot;Could not find index for %@&quot;, dictionaryKey];</div><div class="line">                </div><div class="line">                if (_logsErrors) &#123;</div><div class="line">                    NSLog(@&quot;%@&quot;, message);</div><div class="line">                &#125;</div><div class="line">                if (outErr) &#123;</div><div class="line">                    *outErr = [self errorWithMessage:message];</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        </div><div class="line">        while (idx &lt; queryCount) &#123;</div><div class="line">            </div><div class="line">            if (arrayArgs &amp;&amp; idx &lt; (int)[arrayArgs count]) &#123;</div><div class="line">                obj = [arrayArgs objectAtIndex:(NSUInteger)idx];</div><div class="line">            &#125;</div><div class="line">            else if (args) &#123;</div><div class="line">                obj = va_arg(args, id);</div><div class="line">            &#125;</div><div class="line">            else &#123;</div><div class="line">                //We ran out of arguments</div><div class="line">                break;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            if (_traceExecution) &#123;</div><div class="line">                if ([obj isKindOfClass:[NSData class]]) &#123;</div><div class="line">                    NSLog(@&quot;data: %ld bytes&quot;, (unsigned long)[(NSData*)obj length]);</div><div class="line">                &#125;</div><div class="line">                else &#123;</div><div class="line">                    NSLog(@&quot;obj: %@&quot;, obj);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            </div><div class="line">            idx++;</div><div class="line">            </div><div class="line">            [self bindObject:obj toColumn:idx inStatement:pStmt];</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    ......</div><div class="line">    </div><div class="line">    /* Call sqlite3_step() to run the virtual machine. Since the SQL being</div><div class="line">     ** executed is not a SELECT statement, we assume no data will be returned.</div><div class="line">     */</div><div class="line">    </div><div class="line">    rc      = sqlite3_step(pStmt);</div><div class="line">    </div><div class="line">    if (SQLITE_DONE == rc) &#123;</div><div class="line">        // all is well, let&apos;s return.</div><div class="line">    &#125;</div><div class="line">    else if (rc == SQLITE_ROW) &#123;</div><div class="line">        NSString *message = [NSString stringWithFormat:@&quot;A executeUpdate is being called with a query string &apos;%@&apos;&quot;, sql];</div><div class="line">        .....</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        if (outErr) &#123;</div><div class="line">            *outErr = [self errorWithMessage:[NSString stringWithUTF8String:sqlite3_errmsg(_db)]];</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        if (SQLITE_ERROR == rc) &#123;</div><div class="line">            if (_logsErrors) &#123;</div><div class="line">                NSLog(@&quot;Error calling sqlite3_step (%d: %s) SQLITE_ERROR&quot;, rc, sqlite3_errmsg(_db));</div><div class="line">                NSLog(@&quot;DB Query: %@&quot;, sql);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        else if (SQLITE_MISUSE == rc) &#123;</div><div class="line">            // uh oh. ğŸ˜„ğŸ˜“</div><div class="line">            if (_logsErrors) &#123;</div><div class="line">                NSLog(@&quot;Error calling sqlite3_step (%d: %s) SQLITE_MISUSE&quot;, rc, sqlite3_errmsg(_db));</div><div class="line">                NSLog(@&quot;DB Query: %@&quot;, sql);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        else &#123;</div><div class="line">            // wtf? é»‘äººé—®å·è„¸</div><div class="line">            if (_logsErrors) &#123;</div><div class="line">                NSLog(@&quot;Unknown error calling sqlite3_step (%d: %s) eu&quot;, rc, sqlite3_errmsg(_db));</div><div class="line">                NSLog(@&quot;DB Query: %@&quot;, sql);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    ......</div><div class="line">    </div><div class="line">    int closeErrorCode;</div><div class="line">    </div><div class="line">    if (cachedStmt) &#123;</div><div class="line">        [cachedStmt setUseCount:[cachedStmt useCount] + 1];</div><div class="line">        closeErrorCode = sqlite3_reset(pStmt);</div><div class="line">    &#125;</div><div class="line">    else &#123;</div><div class="line">        closeErrorCode = sqlite3_finalize(pStmt); //é‡Šæ”¾èµ„æº</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    ......</div><div class="line">    </div><div class="line">    _isExecutingStatement = NO;</div><div class="line">    return (rc == SQLITE_DONE || rc == SQLITE_OK);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç è™½ç„¶æœ‰ç‚¹é•¿ï¼Œä½†æ˜¯ç®€å•æ˜“æ‡‚ï¼Œæ³¨é‡Šç‰¹åˆ«é€—ï¼Œç‰¹æ­¤æŒ‚å‡ºæ¥ï¼ŒğŸ˜„ã€‚</p>
<h5 id="æŸ¥è¯¢æ“ä½œ"><a href="#æŸ¥è¯¢æ“ä½œ" class="headerlink" title="æŸ¥è¯¢æ“ä½œ"></a>æŸ¥è¯¢æ“ä½œ</h5><p>æŸ¥è¯¢æ“ä½œçš„å®ç°æ–¹æ³•å¦‚ä¸‹ï¼Œä¸æ›´æ–°æ“ä½œçš„ä»£ç ç±»ä¼¼ï¼Œæ‰€ä¸åŒçš„æ˜¯ä¼šè¿”å›<code>FMResultSet</code> ç»“æœå¯¹è±¡ï¼Œæ‹¿åˆ° <code>FMResultSet</code> å¯¹è±¡è°ƒç”¨å®ƒçš„ next æ–¹æ³•å°±èƒ½ä¾æ¬¡æ‹¿åˆ°æŸ¥è¯¢ç»“æœäº†ã€‚</p>
<h5 id="äº‹åŠ¡æ“ä½œ"><a href="#äº‹åŠ¡æ“ä½œ" class="headerlink" title="äº‹åŠ¡æ“ä½œ"></a>äº‹åŠ¡æ“ä½œ</h5><p>å¦‚æœéœ€è¦å¯ç”¨äº‹åŠ¡ï¼Œåªéœ€è¦è°ƒç”¨ SQL è¯­å¥ <code>begin transaction</code> ç„¶å <code>commit transaction</code> æˆ–è€… <code>rollback transaction</code> å³å¯ã€‚FMDB å°è£…çš„å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">- (BOOL)rollback &#123;</div><div class="line">    BOOL b = [self executeUpdate:@&quot;rollback transaction&quot;];</div><div class="line">    </div><div class="line">    if (b) &#123;</div><div class="line">        _inTransaction = NO;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return b;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (BOOL)commit &#123;</div><div class="line">    BOOL b =  [self executeUpdate:@&quot;commit transaction&quot;];</div><div class="line">    </div><div class="line">    if (b) &#123;</div><div class="line">        _inTransaction = NO;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return b;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (BOOL)beginDeferredTransaction &#123;</div><div class="line">    </div><div class="line">    BOOL b = [self executeUpdate:@&quot;begin deferred transaction&quot;];</div><div class="line">    if (b) &#123;</div><div class="line">        _inTransaction = YES;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return b;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (BOOL)beginTransaction &#123;</div><div class="line">    </div><div class="line">    BOOL b = [self executeUpdate:@&quot;begin exclusive transaction&quot;]; //ä¼šå¯åŠ¨ EXCLUSIVE é”ï¼Œå…¶å®ƒä»»ä½•çº¿ç¨‹éƒ½ä¸èƒ½è®¿é—®æ•°æ®åº“äº†</div><div class="line">    if (b) &#123;</div><div class="line">        _inTransaction = YES;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    return b;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒSQLite æ˜¯è‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹äºæ•°æ®åº“çš„ä¿®æ”¹æ“ä½œéƒ½ä¼šæ‰“åŒ…æˆäº‹åŠ¡è‡ªåŠ¨æäº¤ã€‚è€Œ SQLite æ¯ç§’èƒ½æ”¯æŒé«˜è¾¾50000æ¡çš„æ•°æ®æ’å…¥ï¼Œä½†æ¯ç§’åªèƒ½æ”¯æŒå‡ åä¸ªäº‹åŠ¡æ“ä½œï¼Œæ‰€ä»¥åœ¨è¿›è¡Œæ‰¹é‡å†™å…¥æ“ä½œæ—¶å¯å¯ç”¨äº‹åŠ¡æ¥æé«˜å†™å…¥æ€§èƒ½ã€‚</p>
<h5 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h5><p>FMDB ä¸ºäº†è§£å†³å¤šçº¿ç¨‹è®¿é—®æ•°æ®åº“çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè®¾è®¡äº†<code>FMDatabaseQueue</code>ç±»ï¼Œä½¿ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œåˆå§‹åŒ–ä¸€ä¸ª <code>FMDatabaseQueue</code> å•ä¾‹å¯¹è±¡ï¼Œå³å¯åœ¨å¤šçº¿ç¨‹ä¸­è°ƒç”¨å®ƒçš„æ–¹æ³•å®‰å…¨æ“ä½œæ•°æ®åº“äº†ï¼Œå…¶ä¸»è¦å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">- (void)inDatabase:(void (^)(FMDatabase *db))block &#123;</div><div class="line">    /* Get the currently executing queue (which should probably be nil, but in theory could be another DB queue</div><div class="line">     * and then check it against self to make sure we&apos;re not about to deadlock. */</div><div class="line">    FMDatabaseQueue *currentSyncQueue = (__bridge id)dispatch_get_specific(kDispatchQueueSpecificKey);//å–å‡ºå½“å‰é˜Ÿåˆ—çš„æ ‡å¿—</div><div class="line">    assert(currentSyncQueue != self &amp;&amp; &quot;inDatabase: was called reentrantly on the same queue, which would lead to a deadlock&quot;);</div><div class="line">    </div><div class="line">    FMDBRetain(self);</div><div class="line">    </div><div class="line">    dispatch_sync(_queue, ^() &#123;</div><div class="line">        </div><div class="line">        FMDatabase *db = [self database];</div><div class="line">        block(db);</div><div class="line">        </div><div class="line">        .....</div><div class="line">    &#125;);</div><div class="line">    </div><div class="line">    FMDBRelease(self);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œå…ˆåˆ¤æ–­æ˜¯éåœ¨åŒä¸€ä¸ªé˜Ÿåˆ—ä¸­è°ƒç”¨è¯¥æ–¹æ³•ï¼Œå¦‚æœæ˜¯çš„è¯åˆ™ä¼šæ–­è¨€æç¤ºåœ¨åŒä¸€é˜Ÿåˆ—ä¸­åµŒå¥—è°ƒç”¨è¯¥æ–¹æ³•å¯èƒ½å¯¼è‡´æ­»é”ï¼Œç„¶åå°†æ•°æ®åº“çš„æ“ä½œæ”¾åˆ°ä¸²è¡Œé˜Ÿåˆ—ä¸­åŒæ­¥æ‰§è¡Œï¼Œä»¥æ­¤é¿å…çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<p>####å‚è€ƒ</p>
<ul>
<li><a href="http://www.sqlite.org/threadsafe.html">Using SQLite In Multi-Threaded Applications</a></li>
<li><a href="https://sqlite.org/faq.html">SQLite Frequently Asked Questions</a></li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/iOS/">iOS</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/06/25/iOSæ—¥å¿—æ¡†æ¶CocoaLumberjackåˆ†æ/" title="iOSæ—¥å¿—æ¡†æ¶CocoaLumberjackåˆ†æ" itemprop="url">iOSæ—¥å¿—æ¡†æ¶CocoaLumberjackåˆ†æ</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Joey" target="_blank" itemprop="author">Joey</a>
		
  <p class="article-time">
    <time datetime="2017-06-25T10:52:33.000Z" itemprop="datePublished"> Published 2017-06-25</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p><a href="https://github.com/CocoaLumberjack/CocoaLumberjack">CocoaLumberjack</a> æ˜¯ æ”¯æŒ iOS å’Œ Mac å¹³å°çš„æ—¥å¿—æ¡†æ¶ï¼Œä½¿ç”¨ç®€å•ï¼ŒåŠŸèƒ½å¼ºå¤§ä¸”ä¸å¤±çµæ´»ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯ï¼šæ”¯æŒä¸åŒ Level çš„ Log ä¿¡æ¯è¾“å‡ºåˆ°å„ä¸ªæ¸ é“ï¼ŒåŒ…æ‹¬è‹¹æœæ—¥å¿—ç³»ç»Ÿã€Xcode æ§åˆ¶å°ã€æœ¬åœ°æ–‡ä»¶æˆ–è€…æ•°æ®åº“ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//1,è®¾ç½® Log è¾“å‡ºæ¸ é“</div><div class="line">[DDLog addLogger:[DDTTYLogger sharedInstance]]; // TTY = Xcode console</div><div class="line">[DDLog addLogger:[DDASLLogger sharedInstance]]; // ASL = Apple System Logs</div><div class="line"></div><div class="line">DDFileLogger *fileLogger = [[DDFileLogger alloc] init]; // File Logger</div><div class="line">fileLogger.rollingFrequency = 60 * 60 * 24; // 24 hour rolling</div><div class="line">fileLogger.logFileManager.maximumNumberOfLogFiles = 7;</div><div class="line">[DDLog addLogger:fileLogger];</div><div class="line"></div><div class="line">//2,æ‰“å° log ä¿¡æ¯</div><div class="line">DDLogVerbose(@&quot;Verbose&quot;); // Log ä¿¡æ¯</div><div class="line">DDLogDebug(@&quot;Debug&quot;);</div><div class="line">DDLogInfo(@&quot;Info&quot;);</div><div class="line">DDLogWarn(@&quot;Warn&quot;);</div><div class="line">DDLogError(@&quot;Error&quot;);</div></pre></td></tr></table></figure>
<ul>
<li>é¦–å…ˆï¼Œé€šè¿‡ DDLog çš„ <code>addLogger:(id &lt;DDLogger&gt;)logger</code> æ–¹æ³•æ·»åŠ  Log æ•°æ®è¾“å‡ºçš„æ¸ é“ï¼Œä¸Šé¢ä»£ç æ˜¯æ·»åŠ äº† <code>DDTTYLogger</code> ï¼ˆXcode æ§åˆ¶å°ï¼‰ã€<code>DDASLLogger</code> ï¼ˆè‹¹æœæ—¥å¿—ç³»ç»Ÿï¼‰ã€<code>DDFileLogger</code>ï¼ˆæœ¬åœ°æ–‡ä»¶ï¼‰ä¸‰ç§æ¸ é“ï¼›</li>
<li>ç„¶åï¼Œä½¿ç”¨åŒºåˆ†ä¸åŒ Level çš„å®å®šä¹‰æ–¹æ³•ï¼Œå³å¯æŠŠ Log ä¿¡æ¯è¾“å‡ºåˆ°å‰é¢æ·»åŠ çš„æ¸ é“ã€‚</li>
</ul>
<p>ä¸‹é¢ï¼Œé€æ­¥åˆ†æä¸‹å…¶å®ç°ï¼š</p>
<ol>
<li>æ‰€æœ‰çš„ log æ•°æ®éƒ½ä¼šå‘ç»™ DDLog å¯¹è±¡ï¼›</li>
<li>DDLog å¯¹è±¡å†æŠŠ log æ•°æ®æ´¾å‘ç»™å·²æ·»åŠ çš„å„ä¸ª Logger å¯¹è±¡ï¼›</li>
<li>DDLogger å¯¹è±¡å°† log æ•°æ®é€šè¿‡å…¶é…ç½®çš„ <code>DDLogFomatter</code> æ ¼å¼ç±»è¿›è¡Œæ ¼å¼å¤„ç†åè¾“å‡ºï¼›</li>
</ol>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼Œä»¥è°ƒç”¨<code>DDLogVerbose</code> log ä¿¡æ¯ä¸ºä¾‹ï¼Œ<code>DDLogVerbose</code> å®å®šä¹‰å®åˆ™ä¸ºäº†æ–¹ä¾¿è°ƒç”¨ log ä¿¡æ¯ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">//ä¸åŒçº§åˆ«çš„ Log å®å®šä¹‰</div><div class="line">#define DDLogVerbose(frmt, ...) LOG_MAYBE(LOG_ASYNC_ENABLED, LOG_LEVEL_DEF, DDLogFlagVerbose, 0, nil, __PRETTY_FUNCTION__, frmt, ##__VA_ARGS__)</div><div class="line">...</div><div class="line"></div><div class="line">#define LOG_MAYBE(async, lvl, flg, ctx, tag, fnct, frmt, ...) \</div><div class="line">        do &#123; if(lvl &amp; flg) LOG_MACRO(async, lvl, flg, ctx, tag, fnct, frmt, ##__VA_ARGS__); &#125; while(0)</div><div class="line">        </div><div class="line">#define LOG_MACRO(isAsynchronous, lvl, flg, ctx, atag, fnct, frmt, ...) \</div><div class="line">        [DDLog log : isAsynchronous                                     \</div><div class="line">             level : lvl                                                \</div><div class="line">              flag : flg                                                \</div><div class="line">           context : ctx                                                \</div><div class="line">              file : __FILE__                                           \</div><div class="line">          function : fnct                                               \</div><div class="line">              line : __LINE__                                           \</div><div class="line">               tag : atag                                               \</div><div class="line">            format : (frmt), ## __VA_ARGS__]</div></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çœ‹åˆ° <code>LOG_MAYBE</code>å®å®šä¹‰é€šè¿‡ <code>if(lvl &amp; flg)</code> åˆ¤æ–­å¤„ç†äº†ä¸åŒçº§åˆ«çš„Logä¿¡æ¯æ˜¯å¦è¾“å‡ºçš„é€»è¾‘ï¼Œç„¶åè°ƒç”¨ <code>LOG_MACRO</code> ,æœ€ç»ˆè°ƒç”¨çš„æ˜¯<code>DDLog</code>çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">- (void)log:(BOOL)asynchronous</div><div class="line">    message:(NSString *)message</div><div class="line">      level:(DDLogLevel)level</div><div class="line">       flag:(DDLogFlag)flag</div><div class="line">    context:(NSInteger)context</div><div class="line">       file:(const char *)file</div><div class="line">   function:(const char *)function</div><div class="line">       line:(NSUInteger)line</div><div class="line">        tag:(id)tag &#123;</div><div class="line">    DDLogMessage *logMessage = [[DDLogMessage alloc] initWithMessage:message</div><div class="line">                                                               level:level</div><div class="line">                                                                flag:flag</div><div class="line">                                                             context:context</div><div class="line">                                                                file:[NSString stringWithFormat:@&quot;%s&quot;, file]</div><div class="line">                                                            function:[NSString stringWithFormat:@&quot;%s&quot;, function]</div><div class="line">                                                                line:line</div><div class="line">                                                                 tag:tag</div><div class="line">                                                             options:(DDLogMessageOptions)0</div><div class="line">                                                           timestamp:nil];</div><div class="line">    </div><div class="line">    [self queueLogMessage:logMessage asynchronously:asynchronous];</div><div class="line">&#125;</div><div class="line"></div><div class="line">``` </div><div class="line"> </div><div class="line">* ç¬¬äºŒæ­¥æŠŠ log æ•°æ®æ´¾å‘ç»™å·²æ·»åŠ çš„ Loggerï¼Œ</div></pre></td></tr></table></figure>
<ul>
<li><p>(void)queueLogMessage:(DDLogMessage *)logMessage asynchronously:(BOOL)asyncFlag {</p>
<p>  dispatch_semaphore_wait(_queueSemaphore, DISPATCH_TIME_FOREVER); //ä¿¡å·é‡å‡ä¸€</p>
<p>  â€¦â€¦</p>
<p>  dispatch_block_t logBlock = ^{</p>
<pre><code>@autoreleasepool {
    [self lt_log:logMessage];
}
</code></pre><p>  };</p>
<p>  if (asyncFlag) {</p>
<pre><code>dispatch_async(_loggingQueue, logBlock);
</code></pre><p>  } else {</p>
<pre><code>dispatch_sync(_loggingQueue, logBlock);
</code></pre><p>  }<br>}</p>
</li>
<li><p>(void)lt_log:(DDLogMessage *)logMessage {<br>  // Execute the given log message on each of our loggers.</p>
<p>  NSAssert(dispatch_get_specific(GlobalLoggingQueueIdentityKey),</p>
<pre><code>@&quot;This method should only be run on the logging thread/queue&quot;);
</code></pre><p>  if (_numProcessors &gt; 1) {</p>
<pre><code>for (DDLoggerNode *loggerNode in self._loggers) {
    // skip the loggers that shouldn&apos;t write this message based on the log level

    if (!(logMessage-&gt;_flag &amp; loggerNode-&gt;_level)) {
        continue;
    }

    dispatch_group_async(_loggingGroup, loggerNode-&gt;_loggerQueue, ^{ @autoreleasepool {
        [loggerNode-&gt;_logger logMessage:logMessage];
    } });
}

dispatch_group_wait(_loggingGroup, DISPATCH_TIME_FOREVER);
</code></pre><p>  } else {</p>
<pre><code>// Execute each logger serialy, each within its own queue.
//é’ˆå¯¹äºå•æ ¸å¤„ç†å™¨åšçš„ä¼˜åŒ–å¤„ç†
....
</code></pre><p>  }</p>
<p>  dispatch_semaphore_signal(_queueSemaphore);//ä¿¡å·é‡åŠ ä¸€<br>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">ä»ä¸Šé¢ä»£ç çœ‹åˆ°ï¼Œæ‰€æœ‰çš„ log æ¶ˆæ¯éƒ½ä¼šæ·»åŠ åˆ° loggingQueue ä¸²è¡Œé˜Ÿåˆ—ä¸­ï¼Œç¡®ä¿å…ˆè¿›å…ˆå‡ºï¼Œè€Œä¸”ä½¿ç”¨äº†ä¿¡å·é‡æ¥é™åˆ¶æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­çš„logæ•°é‡ï¼š</div><div class="line"></div><div class="line">- `dispatch_semaphore_wait` ä¸ `dispatch_semaphore_signal` çš„ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œ`dispatch_semaphore_wait` ä¿¡å·é‡å‡ä¸€ï¼Œ`dispatch_semaphore_signal`ä¿¡å·é‡åŠ ä¸€ï¼Œ å½“ä¿¡å·é‡ä¸º0æ—¶çº¿ç¨‹å°±ä¼šè¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œç›´åˆ°ä¿¡å·é‡å¤§äº0æ—¶æ‰ä¼šæ‰§è¡Œä¸‹å»ï¼›åˆ›å»ºä¿¡å·é‡çš„æ—¶å€™å¯æŒ‡å®šä¿¡å·é‡ä¸ªæ•°ï¼š</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>(void)initialize {<br>  static dispatch_once_t DDLogOnceToken;</p>
<p>  dispatch_once(&amp;DDLogOnceToken, ^{</p>
<pre><code>NSLogDebug(@&quot;DDLog: Using grand central dispatch&quot;);

_loggingQueue = dispatch_queue_create(&quot;cocoa.lumberjack&quot;, NULL);//ä¸²è¡Œé˜Ÿåˆ—
_loggingGroup = dispatch_group_create();

void *nonNullValue = GlobalLoggingQueueIdentityKey; // Whatever, just not null
dispatch_queue_set_specific(_loggingQueue, GlobalLoggingQueueIdentityKey, nonNullValue, NULL); //æ·»åŠ æ ‡å¿—

_queueSemaphore = dispatch_semaphore_create(DDLOG_MAX_QUEUE_SIZE);//é€šè¿‡ä¿¡å·é‡è®¾ç½®é˜Ÿåˆ—æœ€å¤§æ•°é‡

......
_numProcessors = MAX([NSProcessInfo processInfo].processorCount, (NSUInteger) 1);

NSLogDebug(@&quot;DDLog: numProcessors = %@&quot;, @(_numProcessors));
</code></pre><p>  });<br>}</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- `dispatch_get_specific` ä¸ `dispatch_queue_set_specific` æ–¹æ³•ï¼Œä½œç”¨ç±»ä¼¼äº`objc_setAssociatedObject` è·Ÿ `objc_getAssociatedObject`ï¼Œåœ¨çº¿ç¨‹é˜Ÿåˆ—ä¸­æ·»åŠ æ ‡å¿—ï¼Œè¿è¡Œçš„æ—¶å€™å–å‡ºæ ‡å¿—ä¾¿å¯åˆ¤æ–­æŸä¸ªæ–¹æ³•æ˜¯å¦è¿è¡Œåœ¨æŒ‡å®šçš„é˜Ÿåˆ—ä¸­ã€‚ä»ä¸Šé¢ä»£ç å¯çœ‹å‡ºï¼Œåœ¨ loggingQueue é˜Ÿåˆ—åˆ›å»ºçš„æ—¶å€™å°±è®¾ç½®äº†æ ‡è¯† `GlobalLoggingQueueIdentityKey`, åˆ°æ—¶å€™å–å‡ºå½“å‰çº¿ç¨‹çš„æ ‡å¿—è¿›è¡Œåˆ¤æ–­ï¼Œæ¥ç¡®ä¿ `lt_log:(DDLogMessage *)logMessage` æ–¹æ³•åœ¨ `loggingQueue` é˜Ÿåˆ—ä¸­ã€‚</div><div class="line">- ä½¿ç”¨ `dispatch_group_wait` æ–¹æ³•ï¼Œä½¿å¾—å¤šä¸ªå¹¶å‘ block å…¨éƒ¨æ‰§è¡Œå®Œæˆåç¨‹åºæ‰ä¼šæ‰§è¡Œä¸‹å»ã€‚è¿™é‡Œï¼ŒNSLog å¯¹è±¡ä¼šå°† log ä¿¡æ¯æ´¾å‘ç»™å¤šä¸ªæ¸ é“ ï¼ˆNSLoggerï¼‰å¹¶å‘æ‰§è¡Œè®°å½• log ä¿¡æ¯ï¼Œæ‰§è¡Œå®Œä¹‹åä¾¿ä¼šå°†ä¿¡å·é‡åŠ ä¸€ã€‚</div><div class="line"></div><div class="line"></div><div class="line">- ç¬¬ä¸‰æ­¥ï¼Œä¸åŒçš„ NSLogger ä¼šåœ¨è‡ªå·±çš„çº¿ç¨‹é˜Ÿåˆ—ä¸­è®°å½• log ä¿¡æ¯ï¼Œä¸‹é¢æ¥çœ‹ `DDFileLogger` çš„å¤„ç†ï¼š</div></pre></td></tr></table></figure>
</li>
</ul>
<ul>
<li><p>(void)logMessage:(DDLogMessage <em>)logMessage {<br>  NSString </em>message = logMessage-&gt;_message;<br>  BOOL isFormatted = NO;</p>
<p>  if (_logFormatter) {//æ ¼å¼åŒ–logæ•°æ®</p>
<pre><code>message = [_logFormatter formatLogMessage:logMessage];
isFormatted = message != logMessage-&gt;_message;
</code></pre><p>  }</p>
<p>  if (message) {</p>
<pre><code>if ((!isFormatted || _automaticallyAppendNewlineForCustomFormatters) &amp;&amp;
    (![message hasSuffix:@&quot;\n&quot;])) {//æ·»åŠ æ¢è¡Œç¬¦
    message = [message stringByAppendingString:@&quot;\n&quot;];
}

NSData *logData = [message dataUsingEncoding:NSUTF8StringEncoding];

@try {
    [self willLogMessage];

    [[self currentLogFileHandle] writeData:logData]; //å†™å…¥æ–‡ä»¶ä¸­

    [self didLogMessage]; 
} @catch (NSException *exception) {
    exception_count++;
    .....
</code></pre><p>  }<br>}<br>```</p>
</li>
</ul>
<p>ä»£ç æ¯”è¾ƒç®€å•æ˜äº†ï¼Œ å°±æ˜¯æŠŠlogä¿¡æ¯æ ¼å¼åŒ–åå†™åˆ°æ–‡ä»¶ä¸­ï¼Œå†™å…¥æ–‡ä»¶åä¼šæ£€æŸ¥å½“å‰æ–‡ä»¶å¤§å°ï¼Œæ–‡ä»¶è¶…è¿‡æœ€å¤§é™åˆ¶åå°±ä¼šå»å›æ»šå½’æ¡£æ—¥å¿—æ–‡ä»¶ã€‚</p>
<p>æœ€åï¼Œæ€»ç»“ä¸€ä¸‹ï¼ŒCocoaLumberjack æ—¥å¿—æ¡†æ¶çš„æ‹“å±•çµæ´»æ€§ç›¸å½“ä¸é”™ï¼Œå¯è‡ªå®šä¹‰æ—¥å¿— levelã€æ—¥å¿—çš„æ ¼å¼ã€æ—¥å¿—çš„è¾“å‡ºç­‰ç­‰ï¼Œä½¿ç”¨èµ·æ¥ä¹Ÿç®€å•æ–¹ä¾¿ã€‚</p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/iOS/">iOS</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/06/11/æ€»ç»“-HTTP-åè®®åœ¨-iOS-ä¸­çš„ä½¿ç”¨/" title="æ€»ç»“ HTTP åè®®åœ¨ iOS ä¸­çš„ä½¿ç”¨" itemprop="url">æ€»ç»“ HTTP åè®®åœ¨ iOS ä¸­çš„ä½¿ç”¨</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Joey" target="_blank" itemprop="author">Joey</a>
		
  <p class="article-time">
    <time datetime="2017-06-11T13:41:37.000Z" itemprop="datePublished"> Published 2017-06-11</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>å¹³æ—¶å¼€å‘ä¸­æ€»å…ä¸äº†ä¸ HTTP ç½‘ç»œè¯·æ±‚æ‰“äº¤é“ï¼Œåœ¨æ­¤åšä¸ªæ€»ç»“ã€‚</p>
<p>å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯é€šè¿‡ HTTP åè®®é€šè®¯ï¼Œå®¢æˆ·ç«¯ä¼šå‘é€è¯·æ±‚ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>è¯·æ±‚æ¶ˆæ¯ï¼ˆRequest Messageï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>è¯·æ±‚è¡Œï¼ˆRequest Lineï¼‰</td>
<td></td>
</tr>
<tr>
<td>CRLF</td>
<td></td>
</tr>
<tr>
<td>è¯·æ±‚å¤´ï¼ˆHeaderï¼‰</td>
<td></td>
</tr>
<tr>
<td>CRLF</td>
<td></td>
</tr>
<tr>
<td>è¯·æ±‚ä½“ï¼ˆBodyï¼‰</td>
<td></td>
</tr>
</tbody>
</table>
<p>è¯·æ±‚æ¶ˆæ¯ç”±è¯·æ±‚è¡Œï¼Œè¯·æ±‚å¤´ï¼Œè¯·æ±‚ä½“ä¸‰éƒ¨åˆ†ç»„æˆï¼Œè¯·æ±‚ä½“æ˜¯å¯é€‰çš„ï¼Œä¸ä¸€å®šæœ‰ï¼ŒCRLFæ˜¯æ¢è¡Œç¬¦ <code>\r\n</code>ã€‚</p>
<p>æœåŠ¡ç«¯å“åº”çš„æ ¼å¼ä¸è¯·æ±‚æ¶ˆæ¯ç±»ä¼¼ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>å“åº”æ¶ˆæ¯ï¼ˆResponse Messageï¼‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>å“åº”è¡Œï¼ˆStatus Lineï¼‰</td>
<td></td>
</tr>
<tr>
<td>CRLF</td>
<td></td>
</tr>
<tr>
<td>å“åº”å¤´ï¼ˆHeaderï¼‰</td>
<td></td>
</tr>
<tr>
<td>CRLF</td>
<td></td>
</tr>
<tr>
<td>å“åº”ä½“ï¼ˆBodyï¼‰</td>
<td></td>
</tr>
</tbody>
</table>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œä½¿ç”¨ç™¾åº¦æœç´¢<code>bilibili åŠ¨ç”»</code>æ—¶ï¼Œæµè§ˆå™¨åœ°å€æ æ˜¾ç¤ºä¸º <code>https://www.baidu.com/s?wd=bilibili%20åŠ¨ç”»</code>ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">GET /s?wd=bilibili%20%E5%8A%A8%E7%94%BB HTTP/1.1</div><div class="line">Host: www.baidu.com</div></pre></td></tr></table></figure>
<h4 id="è¯·æ±‚è¡Œ"><a href="#è¯·æ±‚è¡Œ" class="headerlink" title="è¯·æ±‚è¡Œ"></a>è¯·æ±‚è¡Œ</h4><p>ç”±ä¸Šé¢çœ‹å‡ºï¼Œè¯·æ±‚è¡Œçš„æ ¼å¼æ˜¯ï¼š</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Request-URI</th>
<th>HTTP-Version</th>
<th>CRLF</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
</tr>
</tbody>
</table>
<p>è¯·æ±‚è¡Œçš„æ•°æ®ç¼–ç æ ¼å¼å¿…é¡»ä¸º <code>ASCII</code> ç¼–ç ï¼Œåˆ†ä¸ºæ‰€ä»¥è¯·æ±‚åœ°å€å¸¦æœ‰ä¸­æ–‡çš„æ—¶å€™ï¼Œä¼šè¿›è¡Œ UrlEncode ï¼Œè€Œä¸”æœ‰äº›ç‰¹æ®Šçš„å­—ç¬¦è™½ç„¶åˆ—åœ¨<code>ASCII</code>ç¼–ç è¡¨ä¸­ï¼ˆä¾‹å¦‚ç©ºæ ¼0x20ï¼‰ï¼Œä½†è¿˜æ˜¯éœ€è¦è¿›è¡Œ UrlEncode ï¼Œ Encode çš„ç»“æœå°±æ˜¯ç”±<code>%</code>å’Œå®‰å…¨çš„<code>ASCII</code>ç ç»„åˆè€Œæˆã€‚<br>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œç©ºæ ¼ç¼–ç ä¸º<code>%20</code>ï¼ŒåŠ¨ç”»ä¸¤ä¸ªå­—å°±è¢«ç¼–ç ä¸º<code>%E5%8A%A8%E7%94%BB</code>ã€‚</p>
<p>åœ¨ iOS ç½‘ç»œæ¡†æ¶ AFNetWorking ä¸­ï¼Œä¼šå¯¹è¯·æ±‚å‚æ•°è¿›è¡Œç¼–ç å¾—åˆ° percent-escaped å­—ç¬¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">NSString * AFPercentEscapedStringFromString(NSString *string) &#123;</div><div class="line">    static NSString * const kAFCharactersGeneralDelimitersToEncode = @&quot;:#[]@&quot;; // does not include &quot;?&quot; or &quot;/&quot; due to RFC 3986 - Section 3.4</div><div class="line">    static NSString * const kAFCharactersSubDelimitersToEncode = @&quot;!$&amp;&apos;()*+,;=&quot;;</div><div class="line"></div><div class="line">    NSMutableCharacterSet * allowedCharacterSet = [[NSCharacterSet URLQueryAllowedCharacterSet] mutableCopy];</div><div class="line">    [allowedCharacterSet removeCharactersInString:[kAFCharactersGeneralDelimitersToEncode stringByAppendingString:kAFCharactersSubDelimitersToEncode]];</div><div class="line">    return [string stringByAddingPercentEncodingWithAllowedCharacters:allowedCharacterSet];</div><div class="line">    ....</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="è¯·æ±‚å¤´"><a href="#è¯·æ±‚å¤´" class="headerlink" title="è¯·æ±‚å¤´"></a>è¯·æ±‚å¤´</h4><p>è¯·æ±‚å¤´çš„æ ¼å¼å°±æ˜¯æ–‡æœ¬é”®å€¼å¯¹çš„å½¢å¼ï¼Œ header å­—æ®µæœ‰å¾ˆå¤šï¼Œå¯åˆ†ä¸ºå¸¸ç”¨é¦–éƒ¨å­—æ®µï¼ˆGeneral Header Fieldsï¼‰å’Œè¯·æ±‚é¦–éƒ¨å­—æ®µï¼ˆRequest Header Fieldsï¼‰ï¼Œå¸¸ç”¨é¦–éƒ¨å­—æ®µæ˜¯è¯·æ±‚æŠ¥æ–‡å’Œå“åº”æŠ¥æ–‡ä¸­éƒ½ä¼šä½¿ç”¨çš„é¦–éƒ¨å­—æ®µï¼Œè¯·æ±‚é¦–éƒ¨å­—æ®µæ˜¯å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ—¶ä½¿ç”¨çš„ã€‚æŒ‘äº›é‡è¦çš„çš„è¯´ä¸€ä¸‹ï¼š</p>
<ul>
<li><p>Connection</p>
<p>åœ¨ HTTP æ—©æœŸç‰ˆæœ¬ä¸­ï¼Œæ¯è¿›è¡Œå®Œä¸€æ¬¡ HTTP é€šä¿¡å°±ä¼šæ–­å¼€ TCP è¿æ¥ï¼Œä¸‹æ¬¡è¯·æ±‚æ•°æ®å°±è¦é‡æ–°å»ºç«‹ TCP è¿æ¥ï¼Œæ€§èƒ½è¾ƒå·®ï¼›<br>ç°åœ¨ HTTP/1.1 ç‰ˆæœ¬ä¸­é»˜è®¤éƒ½æ˜¯æŒä¹…è¿æ¥ï¼ˆpersistent connectionï¼‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Connection: keep-alive</div></pre></td></tr></table></figure>
<p>è¡¨ç¤º TCP è¿æ¥ä¸å…³é—­ï¼Œå¤šæ¬¡è¯·æ±‚å¯å¤ç”¨åŒä¸€ä¸ª TCP è¿æ¥ï¼Œè€Œä¸å¿…æ¯æ¬¡è¯·æ±‚æ•°æ®éƒ½è¦é‡æ–°å»ºç«‹ TCP è¿æ¥ã€‚<br>å¦å¤– HTTP/1.1 ç‰ˆæœ¬è¿˜å¼•å…¥äº†ç®¡é“æœºåˆ¶ï¼ˆpipeliningï¼‰ï¼šå®¢æˆ·ç«¯åœ¨åŒä¸€ä¸ª TCP è¿æ¥ä¸­å¯ä»¥åŒæ—¶å‘é€å¤šä¸ªè¯·æ±‚ï¼Œè¿›ä¸€æ­¥æé«˜æ•ˆç‡ï¼Œä½†æ˜¯æœåŠ¡ç«¯è¿˜æ˜¯å¾—æŒ‰ç…§è¯·æ±‚é¡ºåºä¾æ¬¡è¿”å›å“åº”æ¶ˆæ¯ã€‚è¿™æ ·ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“ç¬¬ä¸€ä¸ªè¯·æ±‚çš„å“åº”ç‰¹åˆ«æ…¢ï¼Œé‚£ä¹ˆåé¢çš„è¯·æ±‚éƒ½åœ¨æ’é˜Ÿå¹²ç­‰ç€ï¼Œè¿™è¢«ç§°ä¸ºâ€é˜Ÿå¤´å µå¡â€ï¼ˆHead-of-line blockingï¼‰ã€‚</p>
<p>åœ¨ iOS çš„ ç½‘ç»œè¯·æ±‚ç±» <code>NSURLRequest</code> ä¸­ï¼Œæœ‰ç€å¯¹åº”çš„å±æ€§ <code>HTTPShouldUsePipelining</code> è®¾ç½®å¼€å¯ä½¿ç”¨ç®¡é“ï¼Œä½†æ˜¯æ–‡æ¡£ä¸­è¯´æ˜äº†å³ä¾¿è®¾ç½®äº†è¯¥å±æ€§ä¹Ÿæœªå¿…ç”Ÿæ•ˆï¼Œè¿˜éœ€è¦æœåŠ¡ç«¯é…åˆæ”¯æŒã€‚</p>
</li>
<li><p>Cache-Control</p>
<p>é€šå¸¸è¿™ä¸ªå­—æ®µéƒ½ä¼šè®¾ç½®ä¸º<code>no-cache</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cache-Control:no-cache</div></pre></td></tr></table></figure>
<p><code>no-cahe</code>å¹¶ä¸æ˜¯æŒ‡ä¸ç¼“å­˜ï¼Œè€Œæ˜¯è¡¨ç¤ºéœ€ä¸æœåŠ¡å™¨ç¡®è®¤è¿”å›çš„å“åº”æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ï¼Œé˜²æ­¢ä»ç¼“å­˜ä¸­è¿”å›è¿‡æœŸçš„èµ„æºï¼›<br>è¿™ä¸ªå­—æ®µè¿˜å¯ä»¥è®¾ç½®ä¸º<code>no-store</code>ï¼Œè¡¨ç¤ºä¸ç¼“å­˜å“åº”ï¼Œç¦æ­¢æµè§ˆå™¨ä»¥åŠæ‰€æœ‰ä¸­é—´ç¼“å­˜å­˜å‚¨è¿”å›çš„å“åº”ï¼›<br>è®¾ç½®<code>max-age</code>è¡¨ç¤ºç¼“å­˜å“åº”çš„æœ€é•¿æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼›</p>
</li>
<li><p>If-Modified-Since</p>
<p>å¦‚æœè¯·æ±‚çš„èµ„æºåœ¨ If-Modified-Since å­—æ®µå€¼æŒ‡å®šçš„æ—¥æœŸæ—¶é—´ä¹‹åæ²¡æœ‰æ”¹å˜ï¼ŒæœåŠ¡ç«¯ä¼šè¿”å›çŠ¶æ€ç  304 Not Modified çš„å“åº”ï¼Œä¸”å“åº”bodyä¸ºç©ºã€‚æœ‰äº›æƒ…å†µæ˜¯æœåŠ¡ç«¯è¿”å›è¯·æ±‚èµ„æºçš„ Last-Modified å€¼ï¼Œå®¢æˆ·ç«¯ä¸‹æ¬¡è¯·æ±‚æ—¶å°±ä¼šåœ¨ If-Modified-Since å­—æ®µå¸¦ä¸Š Last-Modified å€¼ã€‚</p>
</li>
<li><p>If-Match</p>
<p>æœåŠ¡å™¨å¯é€šè¿‡æŸç§ç®—æ³•ç»™èµ„æºç”Ÿæˆå”¯ä¸€æ ‡å¿—ç¬¦ï¼ˆè¯¥èµ„æºå†…å®¹å‘ç”Ÿäº†æ”¹å˜ä¼šç”Ÿæˆæ–°çš„æ ‡å¿—ç¬¦ï¼‰ï¼Œåœ¨å“åº”å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼ŒæŠŠèµ„æºçš„æ ‡å¿—ç¬¦ä¹Ÿä¼ è¿‡å»ï¼Œä¾‹å¦‚:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ETag:&quot;55648df6-515&quot;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>  å®¢æˆ·ç«¯ä¸‹æ¬¡è¯·æ±‚è¯¥èµ„æºæ—¶ï¼Œå¯åœ¨ If-Match ä¸Šå¸¦ä¸Šè¯¥ Etag å€¼ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚ï¼Œæ‹¿æœåŠ¡ç«¯èµ„æºçš„ Etag å€¼ä¸å®¢æˆ·ç«¯ä¼ è¿‡æ¥çš„ Etag å€¼ä½œæ¯”è¾ƒï¼Œä¸ç›¸åŒåˆ™è¿”å›çŠ¶æ€ç  200 åŠæ–°èµ„æºï¼›ç›¸åŒåˆ™è¿”å›çŠ¶æ€ç 304å‘Šè¯‰å®¢æˆ·ç«¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜ã€‚<br>  åº”ç”¨åœºæ™¯æœ‰ï¼šæ¯”å¦‚å®¢æˆ·ç«¯ç¼“å­˜äº†ä¸€å¼ å¤´åƒå›¾ç‰‡ï¼Œåæ¥æœåŠ¡ç«¯è¯¥èµ„æºå·²ç»å˜äº†ï¼Œæ¢äº†ä¸€å¼ å›¾ç‰‡ï¼Œä½†æ˜¯ URL é“¾æ¥ä¸å˜ï¼Œæ­¤æ—¶é€šè¿‡ ETag å€¼æ¯”è¾ƒä¾¿ä¼šè¿”å›å®¢æˆ·ç«¯æœ€æ–°çš„å›¾ç‰‡èµ„æºã€‚</p>
<ul>
<li><p>Range</p>
<p>å®¢æˆ·ç«¯å¯ä»¥æŒ‡å®šè¯·æ±‚èµ„æºçš„æŸéƒ¨åˆ†æ•°æ®ï¼Œå¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Range: bytes=0-10000</div></pre></td></tr></table></figure>
<p>æœåŠ¡ç«¯æ¥æ”¶åˆ°è¯·æ±‚ï¼Œè‹¥èƒ½æŒ‰ç…§è¦æ±‚å¤„ç†åˆ™è¿”å›çŠ¶æ€ç  206 Partial Content çš„å“åº”ï¼›å¦åˆ™è¿”å›çŠ¶æ€ç  200 åŠå…¨éƒ¨èµ„æºæ•°æ®ã€‚è¿™ä¸ªå­—æ®µå¸¸ç”¨äºæ–­ç‚¹ç»­ä¼ ã€‚</p>
</li>
</ul>
<p>åœ¨ AFNetworking ä¸­ï¼Œåˆå§‹åŒ– HTTP è¯·æ±‚æ—¶å°±ä¼šè®¾ç½®ä¸€äº› header ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//AFHTTPRequestSerializer</div><div class="line"></div><div class="line">[self setValue:[acceptLanguagesComponents componentsJoinedByString:@&quot;, &quot;] forHTTPHeaderField:@&quot;Accept-Language&quot;];</div><div class="line">...</div><div class="line">[self setValue:userAgent forHTTPHeaderField:@&quot;User-Agent&quot;];</div></pre></td></tr></table></figure>
<h4 id="è¯·æ±‚ä½“"><a href="#è¯·æ±‚ä½“" class="headerlink" title="è¯·æ±‚ä½“"></a>è¯·æ±‚ä½“</h4><p>HTTP åè®®ä¸­å¯¹ body çš„å†…å®¹ç¼–ç æ²¡æœ‰ä½œçº¦æŸï¼Œç”±åè®®ä½¿ç”¨è€…ä½œå†³å®šï¼Œbody ä¸­ä½¿ç”¨äºŒè¿›åˆ¶æµä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼Œå¯¹åº”çš„ Content-Type ä¸º application/octet-stream. å¸¸ç”¨çš„ Content-Type æœ‰ä»¥ä¸‹å‡ ç§:</p>
<ul>
<li>application/x-www-form-urlencoded</li>
<li>application/json</li>
<li>multipart/form-data</li>
</ul>
<p>åœ¨ AFNetworking ä¸­ï¼Œå¦‚æœæˆ‘ä»¬çš„ request æ²¡æœ‰è®¾ç½® Content-Type ï¼Œä¸” body ä¸­å¸¦æœ‰æ•°æ®ï¼Œå°±ä¼šé»˜è®¤ä½¿ç”¨<code>application/x-www-form-urlencoded</code>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//AFHTTPRequestSerializer</div><div class="line">if (![mutableRequest valueForHTTPHeaderField:@&quot;Content-Type&quot;]) &#123;</div><div class="line">    [mutableRequest setValue:@&quot;application/x-www-form-urlencoded&quot; forHTTPHeaderField:@&quot;Content-Type&quot;];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>application/x-www-form-urlencoded</code>ç¼–ç å°±æ˜¯ä¸Šé¢æ‰€è¯´çš„UrlEncodeï¼Œåªä¸è¿‡è¿™é‡Œæ˜¯å¯¹ body ä¸­çš„å†…å®¹è¿›è¡Œç¼–ç ã€‚</p>
<p>å¦‚æœéœ€è¦ä¸Šä¼ æ–‡ä»¶ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé€‰æ‹© <code>multipart/form-data</code>ï¼ŒAFNetworking ä¸­æ˜¯è¿™ä¹ˆå¤„ç†çš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- (NSMutableURLRequest *)requestByFinalizingMultipartFormData &#123;</div><div class="line">    if ([self.bodyStream isEmpty]) &#123;</div><div class="line">        return self.request;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Reset the initial and final boundaries to ensure correct Content-Length</div><div class="line">    [self.bodyStream setInitialAndFinalBoundaries];</div><div class="line">    [self.request setHTTPBodyStream:self.bodyStream];</div><div class="line"></div><div class="line">    [self.request setValue:[NSString stringWithFormat:@&quot;multipart/form-data; boundary=%@&quot;, self.boundary] forHTTPHeaderField:@&quot;Content-Type&quot;];</div><div class="line">    [self.request setValue:[NSString stringWithFormat:@&quot;%llu&quot;, [self.bodyStream contentLength]] forHTTPHeaderField:@&quot;Content-Length&quot;];</div><div class="line"></div><div class="line">    return self.request;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è‡³äºä¸ºä»€ä¹ˆæ–‡ä»¶ä¸Šä¼ é€‰æ‹©ä½¿ç”¨ <code>multipart/form-data</code>ï¼Œ<a href="http://mrpeak.cn/blog/http-constitution/">è¿™ç¯‡æ–‡ç« </a>å·²ç»è¯´çš„æ¯”è¾ƒæ¸…æ¥šï¼Œå¦å¤–å°±æ˜¯ä½¿ç”¨<code>multipart/form-data</code>èƒ½å‘é€å¤šç§ç±»å‹çš„æ•°æ®ã€‚</p>
<h4 id="HTTP-2"><a href="#HTTP-2" class="headerlink" title="HTTP/2"></a>HTTP/2</h4><p>ä¸ºäº†è§£å†³ HTTPï¼1.1 åè®®çš„ç¼ºç‚¹ï¼Œè°·æ­Œç‡å…ˆç ”å‘æ¨å‡ºäº† SPDY åè®®æ–¹æ¡ˆï¼Œæ¥ç€ HTTP/2 åè®®åœ¨ SPDY åŸºç¡€ä¸Šå†ä¿®ä¿®æ”¹æ”¹ï¼Œå¸¦æ¥äº†å‡ ä¸ªé‡å¤§æ–°ç‰¹æ€§ï¼š</p>
<ul>
<li>äºŒè¿›åˆ¶ç¼–ç æ ¼å¼ï¼ŒHTTPï¼1.x çš„è§£ææ˜¯åŸºäºæ–‡æœ¬ï¼ŒHTTPï¼2 åè®®è§„å®šäº† HTTP é€šä¿¡æ¶ˆæ¯ä½¿ç”¨äºŒè¿›åˆ¶æ ¼å¼ç¼–ç ï¼Œä½¿ç”¨äºŒè¿›åˆ¶ç¼–ç æ›´æ–¹ä¾¿å¥å£®ï¼›</li>
<li>å¤šè·¯å¤ç”¨ï¼ˆMultiPlexingï¼‰ï¼Œå¤šä¸ªè¯·æ±‚æˆ–å“åº”èƒ½åŒæ—¶åœ¨ä¸€ä¸ª TCP è¿æ¥ä¸Šå‘é€ï¼Œå¹¶ä¸”ä¸éœ€è¦æŒ‰ç…§é¡ºåºä¸€ä¸€å¯¹åº”ï¼Œé¿å…äº†é˜Ÿé¦–é˜»å¡ï¼›</li>
<li>headerå‹ç¼©ï¼Œ ä½¿ç”¨ HPACK å‹ç¼©æ ¼å¼å‹ç¼©è¯·æ±‚å’Œå“åº”å¤´æ•°æ®ï¼Œè€Œä¸”é€šè®¯åŒæ–¹å„è‡ªç¼“å­˜ä¸€ä»½ header fields è¡¨ï¼›</li>
<li>æœåŠ¡ç«¯æ¨é€ï¼ŒæœåŠ¡å™¨å¯ä»¥å¯¹ä¸€ä¸ªå®¢æˆ·ç«¯è¯·æ±‚å‘é€å¤šä¸ªå“åº”ï¼›</li>
</ul>
<p>ç°çŠ¶ï¼Œä¸€èˆ¬å¤§å‹ç½‘ç«™çš„é™æ€èµ„æºè¯·æ±‚æ”¯æŒ HTTP/2 åè®®äº†ï¼Œå…¶å®ƒçš„è¿˜æ˜¯ HTTP/1.1ã€‚</p>
<h5 id="æœªå®Œå¾…ç»­"><a href="#æœªå®Œå¾…ç»­" class="headerlink" title="æœªå®Œå¾…ç»­"></a>æœªå®Œå¾…ç»­</h5><ul>
<li>â€¦â€¦</li>
</ul>
<h5 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h5><p><a href="http://mrpeak.cn/blog/http-constitution/">æ‰’ä¸€æ‰’HTTPçš„æ„æˆ</a><br><a href="https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP åè®®ä»‹ç»</a><br><a href="https://developers.google.com/web/fundamentals/performance/http2/">HTTP 2ç®€ä»‹</a></p>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/HTTP-iOS/">HTTP , iOS</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2017/06/04/iOS-çŸ¥è¯†æ‚é”¦/" title="iOS çŸ¥è¯†æ‚é”¦" itemprop="url">iOS çŸ¥è¯†æ‚é”¦</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Joey" target="_blank" itemprop="author">Joey</a>
		
  <p class="article-time">
    <time datetime="2017-06-04T11:07:33.000Z" itemprop="datePublished"> Published 2017-06-04</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="ä½¿ç”¨-NSURLProtocol-ç›‘æ§-HTTP-åŒ…æ‹¬HTTPS-è¯·æ±‚"><a href="#ä½¿ç”¨-NSURLProtocol-ç›‘æ§-HTTP-åŒ…æ‹¬HTTPS-è¯·æ±‚" class="headerlink" title="ä½¿ç”¨ NSURLProtocol ç›‘æ§ HTTP(åŒ…æ‹¬HTTPS) è¯·æ±‚"></a>ä½¿ç”¨ NSURLProtocol ç›‘æ§ HTTP(åŒ…æ‹¬HTTPS) è¯·æ±‚</h4><p>ä½¿ç”¨ <code>NSURLProtocol</code> èƒ½æ‹¦æˆª <code>NSURLConnection</code> ã€<code>NSURLSession</code> å’Œ <code>UIWebView</code> ä¸­å‡ ä¹æ‰€æœ‰çš„è¯·æ±‚ï¼Œä½† <code>WKWebView</code> é™¤å¤–ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•ï¼š<br>åˆ›å»ºè‡ªå®šä¹‰åè®®å¯¹è±¡ï¼Œç»§æ‰¿ <code>NSURLProtocol</code>ï¼Œå®ç°å…¶è‹¥å¹²æ–¹æ³•ï¼š</p>
<ul>
<li>é€šè¿‡ <code>+ (BOOL)canInitWithRequest:(NSURLRequest *)request;</code> æ–¹æ³•è¿”å› YES ä»£è¡¨æ‹¦æˆªè¯¥è¯·æ±‚ï¼›</li>
<li>åœ¨ <code>+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request;</code> ä¸­è¿”å› request ï¼Œå¦‚æœ‰éœ€è¦å¯ä¿®æ”¹è¯¥ request å†…å®¹åè¿”å›ï¼›</li>
<li>å¼€å§‹å‘é€ç½‘ç»œè¯·æ±‚ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">- (void)startLoading &#123;</div><div class="line">    NSURLSession *session = [NSURLSession sessionWithConfiguration:[NSURLSessionConfiguration defaultSessionConfiguration] delegate:self delegateQueue:nil];</div><div class="line">    NSURLSessionDataTask *task = [session dataTaskWithRequest:self.request];</div><div class="line">    [task resume];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ç®¡ä¸Šå±‚æ˜¯è°ƒç”¨ <code>NSURLConnection</code> è¿˜æ˜¯ <code>NSURLSession</code> çš„ APIï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ç§æ–¹å¼å‘é€ï¼Œåªè¦åœ¨å›è°ƒæ–¹æ³•ä¸­æŠŠæ•°æ®å›ä¼ ç»™ <code>Client</code> å³å¯ã€‚è¿™é‡Œä»¥ NSURLSession ä¸ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error &#123;</div><div class="line">    [self.client URLProtocolDidFinishLoading:self];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)URLSession:(NSURLSession *)session didBecomeInvalidWithError:(NSError *)error &#123;</div><div class="line">    [self.client URLProtocol:self didFailWithError:error];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveResponse:(NSURLResponse *)response completionHandler:(void (^)(NSURLSessionResponseDisposition))completionHandler &#123;</div><div class="line">    [self.client URLProtocol:self didReceiveResponse:response cacheStoragePolicy:NSURLCacheStorageAllowed];</div><div class="line">    completionHandler(NSURLSessionResponseAllow);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)URLSession:(NSURLSession *)session dataTask:(NSURLSessionDataTask *)dataTask didReceiveData:(NSData *)data &#123;</div><div class="line">    [self.client URLProtocol:self didLoadData:data];</div><div class="line">&#125;</div><div class="line">........</div></pre></td></tr></table></figure>
<p><code>client</code> å®ç°äº† <code>NSURLProtocolClient</code> åè®®ï¼Œä¸»è¦æ˜¯é€šçŸ¥ä¸Šå±‚å‘é€äº†ç½‘ç»œè¯·æ±‚åŠæ¥æ”¶åˆ°ç½‘ç»œå“åº”æ•°æ®äº†ï¼Œè¿˜æœ‰ HTTPS éªŒè¯ã€é‡å®šå‘ä»¥åŠå“åº”ç¼“å­˜ç­‰ã€‚</p>
<ul>
<li>æœ€ååˆ«å¿˜äº†ä¸€å¼€å§‹è¦æ³¨å†Œï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[NSURLProtocol registerClass:[YourCustomURLProtocol class]];</div></pre></td></tr></table></figure>
<p>æœ€åçš„æœ€åï¼Œåœ¨ä½¿ç”¨ä¸­ç¢°åˆ°çš„é—®é¢˜ï¼š</p>
<ul>
<li><p>æ— æ³•æˆªè· NSURLSession ç½‘ç»œè¯·æ±‚ï¼Œéœ€è¦è®¾ç½® NSURLSession çš„ sessionConfiguration å¯¹è±¡çš„ protocolClass ä¸º <code>[YourCustomURLProtocol class]</code> ã€‚ä¸æ–¹ä¾¿æ¯æ¬¡åœ¨ NSURLSession è®¾ç½®çš„è¯ï¼Œéœ€è¦ hook æ‰ NSURLSessionConfiguration çš„ protocolClass æ–¹æ³•ï¼š</p>
<pre><code>- (void)hookProtocolClasses {
    Class cls = NSClassFromString(@&quot;__NSCFURLSessionConfiguration&quot;) ?: NSClassFromString(@&quot;NSURLSessionConfiguration&quot;);
    [self swizzleSelector:@selector(protocolClasses) fromClass:cls toClass:[self class]];
}

- (NSArray *)protocolClasses {
    return @[[YourCustomURLProtocol class]];
}
</code></pre><p>å¦å¤–ï¼ŒNSURLSession çš„åå° session æ˜¯ä¸æ”¯æŒè‡ªå®šä¹‰çš„ NSURLProtocol ã€‚</p>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/iOSç¼–ç¨‹/">iOSç¼–ç¨‹</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/iOS/">iOS</a>
  </div>

</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/17/æ¯æ—¥ä¸€å¥/" title="å…«æœˆä¸€å¥" itemprop="url">å…«æœˆä¸€å¥</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Joey" target="_blank" itemprop="author">Joey</a>
		
  <p class="article-time">
    <time datetime="2016-08-16T16:11:47.000Z" itemprop="datePublished"> Published 2016-08-17</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="Auguest-2016"><a href="#Auguest-2016" class="headerlink" title="Auguest 2016"></a>Auguest 2016</h4><ul>
<li><p>16å·ï¼š</p>
<blockquote>
<p>æœ‰äº›äººå°±æ˜¯æœ‰å½±å“åŠ›ï¼ŒæŸç¯‡æ–‡ç« æ ‡é¢˜åªè¦å¸¦ä¸Šxxxè¯´è¿‡çš„è¯ï¼Œå°±å¿ä¸ä½è¦ç‚¹å‡»å»çœ‹ã€‚ä»Šå¤©çœ‹åˆ°æŸä½æ—©å¹´ä¸€ç›´äº‰è®®ä¸æ–­çš„ç½‘çº¢å†™çš„æ–‡ç« ï¼Œæœ‰ç‚¹å¥½å¥‡ï¼Œå¤§æµªæ·˜æ²™ä¹‹ä¸‹ï¼ŒåŒæ—¶æœŸçš„ç½‘çº¢æ—©å°±é”€å£°åŒ¿è¿¹äº†ï¼Œå…¶ä»èƒ½æŒç»­ä¸æ–­çš„å‘å…‰å‘çƒ­ï¼Œè¿™æ˜¯çœŸæœ‰å®åŠ›å§ã€‚</p>
</blockquote>
</li>
<li><p>17å·ï¼š</p>
<blockquote>
<p>ä½ ä¸€å‘³åœ°å»æœç´¢è¿½æ±‚æ­£ç¡®çš„ç­”æ¡ˆï¼Œå´å¿˜äº†è¯¥æ€è€ƒæ¨å¯¼å¾—å‡ºç»“è®ºï¼Œå“ªæ€•æ˜¯é”™è¯¯çš„ç»“è®ºã€‚</p>
</blockquote>
</li>
<li><p>18å·ï¼š</p>
<blockquote>
<p>åªæœ‰è¾“å…¥æ˜¯å­¦è€Œä¸æ€ï¼Œæ€è€Œä¸å­¦åˆ™è¿Ÿæ—©ä¼šæç©ºèº«ä½“ã€‚éœ€è¦å¤§é‡è¾“å…¥ï¼Œå¹¶ä¸”ä¸æ–­è¾“å‡ºæ‰èƒ½å­¦ä»¥è‡´ç”¨ã€‚</p>
</blockquote>
</li>
<li><p>19å·ï¼š</p>
<blockquote>
<p>æ‘˜å½•ï¼šç¬”åº•æ˜ç æ— å¤„å–ï¼Œé—²æŠ›é—²æ·é‡è—¤ä¸­ã€‚</p>
</blockquote>
</li>
<li><p>20å·ï¼š</p>
<blockquote>
<p>ä¸€ä¸ªäººæ‰€å¤„çš„ä½ç½®å†³å®šäº†çœ‹äº‹ç‰©çš„è§’åº¦ï¼Œå…¶åˆ†ææ€è€ƒæ–¹å¼ä¹Ÿä¸ä¸€æ ·ã€‚è¦æƒ³çœ‹åˆ°æ›´å½»åº•æ·±å…¥ä¸€äº›ï¼Œå½“ç„¶æ˜¯åˆ‡æ¢åˆ°ä¸ä¹‹åˆ©ç›Šç›¸å…³çš„è§’è‰²å»è§‚å¯Ÿæ€è€ƒå®ƒã€‚</p>
</blockquote>
</li>
<li><p>21å·ï¼š</p>
<blockquote>
<p>èƒ½æ³¨æ„åˆ°ä½ è‚¥ç˜¦å˜åŒ–çš„æœ‹å‹ï¼Œè¦ä¹ˆæ˜¯å…³å¿ƒä½ çš„äººï¼Œè¦ä¹ˆæ˜¯ä¼šç•™æ„è§‚å¯Ÿçš„äººï¼Œä»–ä»¬äººç¼˜æ™®éæ¯”è¾ƒå¥½ï¼›è¿˜æœ‰å¯èƒ½æ˜¯ï¼Œä½ çœŸçš„å¤ªç˜¦ï¼ˆèƒ–ï¼‰äº†ã€‚</p>
</blockquote>
</li>
<li><p>22å·ï¼š</p>
<blockquote>
<p>å¤šè®¤è¯†æ¥è§¦ä¼˜ç§€çš„äººï¼Œæ„Ÿå—åˆ°ä¸ä»–ä»¬ä¹‹é—´çš„å·¨å¤§å·®è·ï¼Œä½ æ‰ä¼šæ›´åŠ åŠªåŠ›å»è¿½èµ¶ï¼›è€Œç½®èº«äºæ°´å¹³å·®ä¸å¤šçš„äººç¾¤ä¸­ï¼Œä½ éƒ½æ²¡æ„è¯†åˆ°è‡ªå·±çš„æ°´å¹³å¤„äºå“ªä¸ªä½ç½®ï¼Œä½•è°ˆè¿½èµ¶è¶…è¶Šã€‚</p>
</blockquote>
</li>
<li><p>23å·ï¼š</p>
<blockquote>
<p>ä¸€ä¸‡ä¸ªå°æ—¶ç†è®ºï¼Œæ˜¯è¦ä¸æ–­çªç ´è‡ªå·±ï¼ŒæŒ‘æˆ˜æ¯”è‡ªå·±å½“å‰æ°´å¹³æ›´é«˜çš„ç»ƒä¹ ï¼Œä¹Ÿè¦é’ˆå¯¹å¼±ç‚¹é€ä¸ªæ”»ç ´ï¼Œè€Œä¸æ˜¯åŸåœ°æ‰“æ»šï¼Œè¦ä¸å¤©å¤©å¼€è½¦çš„è€å¸æœºå’‹æˆä¸äº†ä¸“ä¸šèµ›è½¦æ‰‹å‘¢ï¼Ÿ</p>
</blockquote>
</li>
<li><p>24å·ï¼š</p>
<blockquote>
<p>â€œè¦è­¦æƒ•é‚£äº›åšå®¢å¾®åšå†™çš„å¥½çš„äº§å“ç»ç†ï¼Œå› ä¸ºåœ¨åšå®¢å¾®åšä¸ŠèŠ±çš„æ—¶é—´è¶Šå¤šï¼Œé‚£ä¹ˆä»–ä»¬åœ¨äº§å“ä¸ŠèŠ±çš„æ—¶é—´å°±ä¼šå‡å°‘ã€‚â€ å¯¹äºå¦‚ä½•åšå¥½äº§å“ï¼Œå‡ºè‰²ä¼˜ç§€çš„äº§å“ç»ç†å¿…ç„¶ç»è¿‡å¤§é‡å®è·µå’Œæ€è€ƒæ€»ç»“å¾—å‡ºä¸€ä»½å¿ƒå¾—ç§˜ç±ï¼Œåªæ˜¯ä»–ä»¬ä»ä¸ç¤ºå¤–äººï¼Œå”¯æœ‰æå°‘æ•°ä¹æ„åˆ†äº«å‡ºæ¥ã€‚</p>
</blockquote>
</li>
<li><p>25å·ï¼š</p>
<blockquote>
<p>æŒ‘é”™å®¹æ˜“ï¼Œæ‰¾äº®ç‚¹éš¾ã€‚ä½çº§é”™è¯¯æ˜¾è€Œæ˜“è§ï¼Œé«˜çº§é”™è¯¯è®©äººå¦‚é² åœ¨å–‰ï¼Œè€Œäº®ç‚¹å°±æ˜¯è®©äººè‡ªç„¶è€Œç„¶åœ°è®¤ä¸ºäº‹æƒ…å°±æ˜¯è¿™æ ·çš„ï¼Œä»¥è‡´äºä½ çœ‹ä¸å‡ºè¿™å°±æ˜¯äº®ç‚¹ã€‚ å«åº§ä¸å«å¥½çš„ä¸œè¥¿ï¼Œä½ å¯ä»¥è·Ÿç€éª‚ï¼Œä½†éª‚å®ƒä¹‹å‰ä½ æœ€å¥½å…ˆæ‰¾å‡ºå«åº§çš„åŸå› ã€‚ å¿…æœ‰äº®(low)ç‚¹ï¼Œæ–¹ä¼šå«åº§!</p>
</blockquote>
</li>
<li><p>26å·ï¼š</p>
<blockquote>
<p>è¹²çš„è¶Šä½ï¼Œçœ‹çš„è¶Šæ¸…ï¼Œå°„çš„è¶Šå‡†ã€‚</p>
</blockquote>
</li>
<li><p>27å·ï¼š</p>
<blockquote>
<p>ä»–ä»æ¥ä¸å†™æ³¨é‡Šï¼Œä»æ¥ä¸ã€‚</p>
</blockquote>
</li>
<li><p>28å·ï¼š</p>
<blockquote>
<p>ä½ æ˜¯ä»€ä¹ˆæ ·çš„äººï¼Œå°±çœ‹åˆ°ä»€ä¹ˆæ ·çš„ä¸–ç•Œã€‚</p>
</blockquote>
</li>
<li><p>29å·ï¼š</p>
<blockquote>
<p>ä½ ä¸ºä»€ä¹ˆä¼šæœ‰ç¼©æ‰‹ç¼©è„šçš„è¡Œä¸ºï¼Œä¸¾æ­¢è½»æµ®ä¸å®šï¼Œæ˜¯å› ä¸ºæ¥åˆ°é™Œç”Ÿçš„ç¯å¢ƒå¿ƒé‡Œæ…Œé‡Œæ…Œå¼ ã€‚è¦å­¦ä¼šæŠ¬å¤´è§‚å¯Ÿå››å‘¨ï¼Œè‡ªä¿¡ä¸€ç‚¹ï¼Œæ²¡ä»€ä¹ˆå¯æ€•çš„ï¼Œä¹Ÿæ²¡ä»€ä¹ˆä¸¢äººçš„ï¼Œå› ä¸ºå‘¨å›´æ ¹æœ¬æ²¡æœ‰äººæ³¨æ„ä½ ã€‚</p>
</blockquote>
</li>
<li><p>30å·ï¼š</p>
<blockquote>
<p>æ²¡æœ‰å…¬å¸ä¸ä¼šé‡è§†æµé‡ï¼Œä¹Ÿæ²¡æœ‰å•†å®¶ä¸æƒ³åœ¨äººæµé‡å¤§çš„åœ°æ–¹å¼€åº—ã€‚</p>
</blockquote>
</li>
<li><p>31å·ï¼š</p>
<blockquote>
<p>ä¸æ˜¯è‹±è¯­éš¾å­¦å¯¼è‡´ä½ ä¸æƒ³å­¦ï¼Œæ˜¯ä½ ä¸å»å­¦å¯¼è‡´è‹±è¯­å˜å¾—è¿™ä¹ˆéš¾ã€‚</p>
</blockquote>
</li>
</ul>
<h4 id="Setemper"><a href="#Setemper" class="headerlink" title="Setemper"></a>Setemper</h4><ul>
<li><p>1å·ï¼š</p>
<blockquote>
<p>é±¼ä¸ç†ŠæŒä¸å¯å…¼å¾—ã€‚æ—¢ç„¶è¿˜æœ‰é±¼åœ¨ï¼Œå°±åˆ«å†è€¿è€¿äºæ€€ç†ŠæŒçš„å¤±å»ï¼Œæœ‰å¾—æœ‰å¤±ï¼Œå¼ºæ±‚ä¸æ¥ã€‚å¥½å¥½çæƒœçœ¼å‰é±¼ã€‚å¬è¿‡å¾ˆå¤šé“ç†ï¼Œä¸ä»£è¡¨æ˜ç™½è¿™äº›é“ç†ã€‚</p>
</blockquote>
</li>
<li><p>2å·ï¼š</p>
<blockquote>
<p>å„ç±»è¿åŠ¨åŠå¨±ä¹ï¼Œç¨³å®šæ€§éƒ½æå…¶é‡è¦ï¼šå‡»çƒæ—¶çš„å¹³ç¨³æŒ¥æ†ï¼Œå¼¹ç´æ—¶çš„å¹³ç¨³å‘åŠ›ã€‚ä¿æŒç¨³å®šæ€§éœ€è¦æå¼ºçš„å¯æ§èƒ½åŠ›ï¼Œè¿™å¾€å¾€éœ€è¦ä¸€å®šçš„åˆ»æ„ç»ƒä¹ æ‰èƒ½åšåˆ°ã€‚åŒæ ·ï¼Œçœ‹ä¸€ä¸ªäººçš„ç¨³å®šæ€§ï¼Œå°±çŸ¥é“ä»–æœ‰å¤šå‰å®³äº†ã€‚</p>
</blockquote>
</li>
<li><p>3å·ï¼š</p>
<blockquote>
<p>å¯¹ä¸ªäººæ¥è¯´ï¼Œä½ ç¼ºå°‘åé©³èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯ç¼ºä¹æ‰¹åˆ¤æ€ç»´èƒ½åŠ›ã€‚</p>
</blockquote>
</li>
<li><p>4å·ï¼š</p>
<blockquote>
<p>é‡è¦çš„äº‹æƒ…åå¤è¯´ï¼Œåå¤æƒ³ï¼Œåå¤åšã€‚</p>
</blockquote>
</li>
<li><p>5å·ï¼š</p>
<blockquote>
<p>å¦‚æœä½ çš„è§è¯†åˆ¤æ–­å’Œå¤§éƒ¨åˆ†äººéƒ½ä¸€æ ·ï¼Œè¿™è¯´æ˜ä½ çš„ç†è§£ã€ä½ çš„æ€è€ƒã€ä½ çš„åŠŸåŠ›éƒ½è¿˜ä¸å¤Ÿæ·±ã€‚</p>
</blockquote>
</li>
<li><p>6å·ï¼š</p>
<blockquote>
<p>ä¸€å°äº¿çš„ç›®æ ‡ï¼Œæœ‰äº›äººçœ‹åˆ°çš„æ˜¯ç¬‘è¯ï¼Œè€Œæœ‰äº›äººçœ‹åˆ°çš„æ˜¯ä¸¤çº§åˆ†åŒ–ã€‚</p>
</blockquote>
</li>
<li><p>7å·ï¼š</p>
<blockquote>
<p>ä½ æƒ³æˆä¸ºä»€ä¹ˆæ ·çš„äººï¼Ÿæ€ä¹ˆæ ·æ‰èƒ½æˆä¸ºè¿™æ ·çš„äººï¼Ÿä½ æ„¿æ„ä»˜å‡ºå¤šå°‘çš„åŠªåŠ›å’Œæ—¶é—´æˆä¸ºè¿™æ ·çš„äººï¼Ÿå¦‚æœä½ ä¸æ„¿æ„ä¸ºä¹‹ä»˜å‡ºï¼Œé‚£ä¹ˆï¼Œæ¢ä¸€ä¸ªç›®æ ‡ï¼Œç›´åˆ°ä½ æ‰¾åˆ°ä½ æ„¿æ„ä»˜å‡ºçš„ç›®æ ‡ï¼Œç„¶åï¼Œå»åŠªåŠ›ã€‚</p>
</blockquote>
</li>
<li><p>8å·ï¼š</p>
<blockquote>
<p>æ‰€æœ‰è¿·èŒ«çš„äº§ç”Ÿï¼Œéƒ½æ˜¯æºäºå¯¹ç°çŠ¶çš„ä¸æ»¡å’Œçœ‹ä¸åˆ°å¸Œæœ›ã€‚é—®é¢˜æ˜¯ï¼Œä¸æ˜¯æ¯æ¬¡éƒ½æœ‰äººä¸ºä½ æ‹¨å¼€è¿·é›¾ï¼ŒæŒ‡å‡ºä¸€æ¡æ˜è·¯ï¼Œå‘Šè¯‰ä½ ç­”æ¡ˆã€‚æ›´å¤šæ—¶å€™æ˜¯éœ€è¦ä½ è‡ªå·±å»å¯»æ‰¾æ€è€ƒã€‚</p>
</blockquote>
</li>
<li><p>9å·ï¼š</p>
<blockquote>
<p>å¬äººè°ˆè¯ä»é˜³æ˜¥ç™½é›ªåˆ°ä¸‹é‡Œå·´äººï¼Œå†…å¿ƒå§æ§½ï¼Œæ²¡æƒ³åˆ°ä½ æ˜¯è¿™æ ·çš„äººï¼›åè¿‡æ¥ï¼Œå¯¹è¯å…ˆä»ä¸‹é‡Œå·´äººå†åˆ°é˜³æ˜¥ç™½é›ªï¼Œä½ ä¼šæš—æš—éœ‡æƒŠï¼ŒåŸæ¥ä½ è¿˜æ˜¯è¿™æ ·çš„äººã€‚</p>
</blockquote>
</li>
<li><p>10å·ï¼š</p>
<blockquote>
<p>å‘¨æœ«åº”è¯¥åšäº›é‡è¦è€Œä¸ç´§è¦çš„äº‹æƒ…ï¼Œé‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯é‡è¦çš„äº‹æƒ…ï¼Ÿé‡è¦çš„äº‹æƒ…å°±æ˜¯é‚£äº›è¦é•¿æœŸå¤§é‡æŠ•å…¥ï¼ŒåæœŸèƒ½è·å–é«˜æ”¶ç›Šçš„äº‹ã€‚</p>
</blockquote>
</li>
<li><p>11å·ï¼š</p>
<blockquote>
<p>éé»‘å³ç™½çš„æƒ³æ³•æºäºå¯¹äº‹ç‰©åˆ¤æ–­çš„å•ä¸€ç»´åº¦ï¼Œä¸å¦¨å¼•å…¥å¤šä¸ªæ ‡å‡†å»è¡¡é‡ã€‚æ¯”å¦‚ï¼Œå“‡ï¼Œè¿™ä¸ªä¸œè¥¿å¥½æ¼‚äº®ï¼Œä¹°ï¼å¯æ˜¯è´µå•Šï¼Œä¸ä¹°ï¼›ä½†å®ƒå®ç”¨å•Šï¼Œè´¨é‡ä¹Ÿå¥½ï¼Œä¹°ï¼å¯æ˜¯ä½ ç”¨ä¸ä¸Šå•Šï¼Œä¸ä¹°ã€‚</p>
</blockquote>
</li>
<li><p>12å·ï¼š</p>
<blockquote>
<p>å‡¡æ˜¯èƒ½ä¸€è¹´è€Œå°±çš„äº‹æƒ…ï¼Œä¸€çœ‹å°±ä¼šçš„æŠ€å·§éƒ½æ˜¯æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ä»·å€¼çš„ï¼Œè¶Šæ˜¯éœ€è¦ä¸‹è‹¦åŠŸå¤«å»ç»ƒçš„æœ¬é¢†ï¼Œè¦ç™¾æŠ˜åƒå›æ‰èƒ½è¾¾æˆçš„ç›®æ ‡æ‰æ˜¯æ„ä¹‰éå‡¡çš„ã€‚</p>
</blockquote>
</li>
<li><p>13å·ï¼š</p>
<blockquote>
<p>ä¸€éƒ¨å¥½çš„å°è¯´ï¼Œä¸ç»æ„å‡ºç°çš„æƒ…èŠ‚å°±æ˜¯ä¸‹æ–‡çš„ä¼ç¬”ã€‚å¯æƒœäººç”Ÿä¸æ˜¯ï¼Œæœ‰äº›äº‹éšé£é£˜æ•£ï¼Œæœ‰äº›äººåä¼šæ— æœŸã€‚</p>
</blockquote>
</li>
<li><p>14å·ï¼š</p>
<blockquote>
<p>ä½ è¦æƒ³æ¸…æ¥šè‡ªå·±çœŸæ­£æƒ³è¦è¿‡çš„ç”Ÿæ´»ï¼Œæ‰ä¸ä¼šéšæ³¢é€æµã€‚</p>
</blockquote>
</li>
<li><p>15å·ï¼š</p>
<blockquote>
<p>æœ‰äº›å–œå‰§ä½ çœ‹å¾—å°´å°¬ä¸å®‰ï¼Œæ˜¯å› ä¸ºä½ æ”¾ä¸å¼€ã€‚è¿™æ˜¯å–œå‰§ï¼Œå°‘ä¸äº†åˆ¶ä½œå°´å°¬åœºé¢é€—äººä¸€ç¬‘</p>
</blockquote>
</li>
<li><p>16å·ï¼š</p>
<blockquote>
<p>èƒ½ä¸€æ­¥åˆ°ä½çš„ç»ä¸åˆ†ä¸¤æ­¥èµ°ã€‚</p>
</blockquote>
</li>
<li><p>17å·ï¼š</p>
<blockquote>
<p>æ¯•ä¸šä¸‰å¹´äº”å¹´çš„ç¡®æ˜¯ä¸€ä¸ªåˆ†æ°´å²­ï¼Œç‰›äººéƒ½æ‹¿å‡ºæå…·ä»£è¡¨æ€§çš„ä½œå“äº†.</p>
</blockquote>
</li>
<li><p>18å·ï¼š</p>
<blockquote>
<p>å¦‚ä½•å…‹æœå¯¹æ ‡é¢˜å…šçš„ä¸‹æ„è¯†å†²åŠ¨ï¼Œä¸å»ç‚¹å‡»å‘¢ï¼Ÿå¤šç‚¹ï¼Œç‚¹åˆ°ä½ ç†Ÿæ‚‰å®ƒä»¬çš„å¥—è·¯ä¸ºä¹‹ã€‚</p>
</blockquote>
</li>
<li><p>19å·ï¼š</p>
<blockquote>
<p>ç¢ç‰‡åŒ–é˜…è¯»çš„å†…å®¹ï¼Œç»å¤§éƒ¨åˆ†å½“å¤©å¿˜è®°ä¸€å¤§åŠï¼Œéš”å¤©å¿˜ä¸ªç²¾å…‰ï¼Œæ— è®ºä½ æ˜¯çœ‹é€»è¾‘æ€ç»´å¥‡è‘©è¯´æ™“æ¾å¥‡è°ˆï¼Œè¿˜æ˜¯é€›çŸ¥ä¹åˆ·ç²¾åå¸–æ”¶è—é«˜ç¥¨ç­”æ¡ˆï¼Œç»“æœéƒ½ä¸€æ ·ã€‚é‚£ä¹ˆï¼Œä½¿ç”¨ç©ºé—²ç¢ç‰‡æ—¶é—´æ¥çº¯ç²¹æ‰“æ¸¸æˆï¼Œä¸å‡è£…é˜…è¯»å­¦ä¹ æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
</blockquote>
</li>
<li><p>20å·ï¼š</p>
<blockquote>
<p>è­¦æƒ•ç‰¹æ®ŠåŒ–å¯¹å¾…ï¼Œä»»ä½•é¦™é¥½é¥½éƒ½æœ‰çƒ‚å¤§è¡—å‘éœ‰çš„æ—¶å€™</p>
</blockquote>
</li>
<li><p>21å·ï¼š</p>
<blockquote>
<p>ä½ å¯ä»¥ä¸æˆåŠŸä½†ä¸€å®šè¦æˆé•¿ï¼Œå½“ç„¶ï¼Œç†æƒ³çš„ç»“æœæ˜¯è¿½é€æˆé•¿æœ€åæ”¶è·æˆåŠŸã€‚</p>
</blockquote>
</li>
<li><p>22å·ï¼š</p>
<blockquote>
<p>é«˜æ°´å¹³å®¡ç¾ä¹Ÿæ˜¯ä¸€ç§èƒ½åŠ›</p>
</blockquote>
</li>
<li><p>23å·ï¼š</p>
<blockquote>
<p>å¯æ€•çš„ä¸æ˜¯å­¤ç‹¬ï¼Œæ˜¯æƒ§æ€•å­¤ç‹¬ã€‚</p>
</blockquote>
</li>
<li><p>24å·ï¼š</p>
<blockquote>
<p>ä¸€éƒ¨ç²¾å½©ç»ä¼¦ä¸”æ·±åº¦æœ‰å†…æ¶µçš„ç”µå½±ï¼Œå¾€å¾€æ˜¯æå…¶å¹³æ·¡çš„å¼€å¤´ï¼Œè®©äººæ¨ä¸èƒ½å¿«è¿›è·³è¿‡ï¼Œè€Œä¸€æ—¦ç†¬è¿‡å¼€å¤´ï¼Œä½ ä¾¿æ¬²ç½¢ä¸èƒ½ï¼Œä¸€ç§å¦™ä¸å¯è¨€çš„æ„Ÿè§‰æµ®æ¶Œäºå¿ƒã€‚</p>
</blockquote>
</li>
<li><p>25å·ï¼š</p>
<blockquote>
<p>ç»™ä½ è‡ªå·±ä¸€ç‚¹è€å¿ƒï¼Œæˆé•¿éœ€è¦æ—¶é—´ï¼Œéœ€è¦åšæŒï¼›å†ç»™è‡ªå·±ä¸€ç‚¹ä¿¡å¿ƒï¼Œç›¸ä¿¡ä»˜å‡ºæ€»ä¼šæœ‰æ”¶è·ï¼ŒæˆåŠŸæ€»ä¼šå¦‚æœŸè€Œè‡³ã€‚</p>
</blockquote>
</li>
<li><p>26å·ï¼š</p>
<blockquote>
<p>å¤–å›½ç‰‡ä¸å›½äº§ç‰‡å·®åˆ«åœ¨å“ªï¼Ÿå¤–å›½ç‰‡ä¸è¶³9åˆ†çŠ¹è±«ä¸å®šæ˜¯å¦å¯çœ‹ï¼Œå›½äº§ç‰‡æ¥è¿‘8åˆ†å±äºç²¾å“æ‹æ‰‹ç§°èµå•Šã€‚</p>
</blockquote>
</li>
<li><p>27å·ï¼š</p>
<blockquote>
<p>æ¥ï¼Œå¹²äº†è¿™ç¢—é¸¡æ±¤ï¼Œç»§ç»­ä¸Šè·¯ï¼</p>
</blockquote>
</li>
<li><p>28å·ï¼š</p>
<blockquote>
<p>å­¦ä¼šé…¿é€ é¸¡æ±¤ï¼Œæ¥åé¸¡æ±¤ã€‚</p>
</blockquote>
</li>
<li><p>29å·ï¼š</p>
<blockquote>
<p>æ€»æœ‰ä¸€å¤©ï¼Œå·¦æ‰‹ä¼šæ¯”å³æ‰‹æ›´å¼ºå¤§ã€‚</p>
</blockquote>
</li>
<li><p>30å·ï¼š</p>
<blockquote>
<p>æ˜¯éæ›²ç›´æ€»è¦ä¸¾ä¸ªæ —å­æ¥è¾…ä½ä¸€ç•ªï¼Œå¿ƒçµé¸¡æ±¤æ›´æ˜¯å°‘ä¸äº†æ —å­æ¥çƒ¹é¥ªã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œæ —å­ä»ä½•è€Œæ¥ï¼Ÿ</p>
</blockquote>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ç”Ÿæ´»/">ç”Ÿæ´»</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/15/æ¯æ—¥ä¸€è®°/" title="å…«æœˆè®°" itemprop="url">å…«æœˆè®°</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Joey" target="_blank" itemprop="author">Joey</a>
		
  <p class="article-time">
    <time datetime="2016-08-15T15:36:27.000Z" itemprop="datePublished"> Published 2016-08-15</time>
    
  </p>
</header>
    <div class="article-content">
        
        <h4 id="August-2016"><a href="#August-2016" class="headerlink" title="August 2016"></a>August 2016</h4><ul>
<li><p>15å·ï¼š</p>
<ul>
<li>è¯»å“ˆåˆ©æ³¢ç‰¹ä¸å¯†å®¤åå…­ç« ï¼Œè€—æ—¶ä¸åˆ°3ä¸ªç•ªèŒ„é’Ÿï¼Œæ¯”ä»¥å¾€ä¼¼ä¹ç•¥æœ‰è¿›æ­¥ï¼›</li>
</ul>
</li>
<li><p>16å·ï¼š</p>
<ul>
<li>è¯»å“ˆåˆ©æ³¢ç‰¹2ç¬¬åä¸ƒç« ï¼Œè€—æ—¶2ä¸ªåŠç•ªèŒ„ï¼Œæ…¢æ…¢å¼€å§‹æ„Ÿå—åˆ°æµåˆ©é˜…è¯»çš„å¿«ä¹ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå°è¯´æ¸å…¥é«˜æ½®éƒ¨åˆ†çš„ç¼˜æ•…ï¼›</li>
</ul>
</li>
<li><p>17å·ï¼š</p>
<ul>
<li>è¯»å“ˆåˆ©æ³¢ç‰¹2ç¬¬åå…«ç« ï¼Œä¸ç»§ç»­è®¡æ—¶äº†ï¼Œè®¡æ—¶ä¼šæœ‰ç§ç´§è¿«æ„Ÿï¼Œç‰‡é¢è¿½æ±‚é€Ÿåº¦åè€Œå¯¼è‡´å¤±å»äº†é˜…è¯»çš„å¿«ä¹ã€‚å“ˆåˆ©å†ä¸€æ¬¡æœ‰å¦‚ç¥åŠ©ï¼Œå‡¤å‡°åœ¨å¤©ï¼Œé“¶å‰‘åœ¨æ‰‹ï¼Œæˆ˜èƒœäº†åœç•™åœ¨æ—¥è®°é‡Œåå…­å²çš„å–‹å–‹ä¸ä¼‘å¾—æ„æ´‹æ´‹çš„åæ´¾ã€‚æœ‰ä¸ªå¤§å†™çš„ç–‘é—®ï¼Œç¬¬ä¸€å­£é‡Œåæ´¾é­‚å½’å­¦æ ¡æ—¶æ€ä¹ˆä¸æ‰¾å‡ºåå…­å²çš„è‡ªå·±è”æ‰‹ä½œæˆ˜å‘¢ï¼Ÿ</li>
</ul>
</li>
<li><p>18å·ï¼š</p>
<ul>
<li>çœ‹å®Œå“ˆåˆ©æ³¢ç‰¹ä¸å¯†å®¤äº†ï¼Œæ˜ç™½äº†æ˜¨å¤©çš„ç–‘é—®ï¼Œæ—¥è®°æ˜¯åæ´¾äºŒå·æ•…æ„æ”¾åˆ°é‡‘å¦®é‚£é‡Œçš„ã€‚æœ€åè§£é‡Šä¸äº†çš„æ˜¯ï¼Œé‚£éƒ¨ç¥å¥‡çš„æ±½è½¦å°†ä»–ä»¬ä»ç¦æ—é‡Œè§£æ•‘äº†å‡ºæ¥ï¼Œé‚£ä¹ˆè°åœ¨èƒŒåæ“çºµï¼Ÿè¿˜æœ‰å°±æ˜¯ï¼Œç¬¬äºŒéƒ¨å¼•å…¥çš„æ²½åé’“èª‰ä¹‹å¾’ï¼Œåˆ»ç”»çš„ä¹Ÿæ˜¯å…¥æœ¨ä¸‰åˆ†ï¼Œæƒ³å¿…æ˜¯ä½œè€…ä¸€ç›´çœ‹ä¸æƒ¯æ­¤ç±»äººï¼Ÿæ€»ä½“è€Œè¨€ï¼Œç¬¬äºŒéƒ¨æƒ…èŠ‚å¼•äººå…¥èƒœï¼Œæ‰£äººå¿ƒå¼¦ï¼Œé€šç¯‡è¯»ä¸‹æ¥å®šæœ‰é…£ç•…æ·‹æ¼“ä¹‹æ„Ÿã€‚</li>
</ul>
</li>
<li><p>19å·ï¼š</p>
<ul>
<li>å“ˆåˆ©æ³¢ç‰¹2çš„ç”µå½±ï¼Œæ”¹ç¼–çš„ç¡®æœ‰å‡ºå½©çš„åœ°æ–¹ï¼Œæƒ…èŠ‚æ›´ç´§å‡‘æ‰“æ–—åœºé¢æ›´æœ‰è¡¨ç°åŠ›ã€‚</li>
</ul>
</li>
<li><p>20å·ï¼š</p>
<ul>
<li>å“ˆåˆ©æ³¢ç‰¹3ç¬¬ä¸€ç« ï¼Œç´¯çš„æ—¶å€™è¯»èµ·æ¥æ„Ÿè§‰è›®åƒåŠ›çš„ï¼Œç²¾ç¥æ— æ³•é›†ä¸­ï¼Œç™½å¤©çš„äº‹æƒ…ä¸æ—¶æµ®ç°ã€‚</li>
</ul>
</li>
<li><p>21å·ï¼š</p>
<ul>
<li>ç¬¬äºŒç« ã€ç¬¬ä¸‰ç« ã€ç¬¬å››ç« ï¼Œå‘ç°è‡ªå·±æ›´åŠ å…³æ³¨æƒ…èŠ‚å‘å±•äº†ï¼Œä¸å†çº ç»“äºä¸è®¤è¯†çš„å•è¯å’Œéš¾æ‡‚çš„å¥å­äº†ï¼Œé‚£å°±å…ˆå›«å›µåæ£å§ã€‚</li>
</ul>
</li>
<li><p>22å·ï¼š</p>
<ul>
<li>ç¬¬äº”ç« ï¼Œæœ‰å¾ˆå¤šåœ°æ–¹è¯»ä¸æ‡‚ï¼Œè­¬å¦‚ç¯å¢ƒçš„æè¿°å§ï¼Œå•è¯ä¸è®¤è¯†çš„ç¼˜æ•…å§ï¼›</li>
<li>ä¸‹ç­ç¬¬ä¸€æ¬¡éª‘è‡ªè¡Œè½¦å›æ¥ï¼Œæ‰¾è·¯æ¢è½¦è€—æ—¶ä¸€ä¸ªå°æ—¶å¤šï¼Œç´¯æƒ¨ï¼Œç®€ç›´æ„Ÿè§‰æŠ¬ä¸èµ·è„šåšäººäº†ã€‚</li>
</ul>
</li>
<li><p>23å·ï¼š</p>
<ul>
<li>ç¬¬å…­ç« ï¼Œå¯¹äºæ¤ç‰©è”¬èœç²®é£Ÿçš„å•è¯è®¤è¯†çš„æ¯”è¾ƒå°‘ï¼Œçœ‹ä¸æ‡‚å°±è·³è¿‡å»äº†</li>
</ul>
</li>
<li><p>24å·ï¼š</p>
<ul>
<li>ç¬¬ä¸ƒç« ï¼Œä¸çŸ¥ä¸è§‰çœ‹å®Œè¿™ä¸€ç« ï¼ŒRon æ˜¯ä¸ªç²—å¿ƒä¸ä¼šè§‚å¯Ÿçš„äººï¼Œä¸çŸ¥é“ Harry å®³æ€•ä»€ä¹ˆï¼Œè€Œ Harry æ¸…æ¥šçŸ¥é“ Ron æ€•ä»€ä¹ˆã€‚</li>
</ul>
</li>
<li><p>25å·ï¼š</p>
<ul>
<li>ç¬¬å…«ç« ï¼ŒHermione å¯¹ Ron è¿‡åˆ†äº†ç‚¹ï¼Œç›¸å¯¹ Harry æ¥è¯´ï¼Œæ²¡é‚£ä¹ˆåœ¨æ„ Ron ã€‚</li>
</ul>
</li>
<li><p>27å·ï¼š</p>
<ul>
<li>ç¬¬ä¹ã€åç«  è‹¦ç—›æ˜¯æš‚æ—¶çš„ã€‚</li>
</ul>
</li>
<li><p>28å·ï¼š</p>
<ul>
<li>ç¬¬åä¸€ç«  å½“æ„¤æ€’é‡ä¸Šå“­æ³£ï¼Œæœ‰ç«ä¹Ÿå–·ä¸å‡ºæ¥ã€‚ç›´é¢ææƒ§ï¼Œä¸å¾—å·²ä¸ºä¹‹ã€‚</li>
</ul>
</li>
<li><p>29å·ï¼š</p>
<ul>
<li>ç¬¬åäºŒç«  è¯»æ‡‚ä¸»è¦æƒ…èŠ‚æ˜¯æ²¡é—®é¢˜äº†ï¼Œåº”è¯¥å¤šæ³¨æ„ç»†èŠ‚ï¼Œè¯»æ‡‚å¤æ‚å¥å­ã€‚</li>
</ul>
</li>
<li><p>30å·ï¼š</p>
<ul>
<li>ç¬¬åä¸‰ç«  Hermione å­¤ç‹¬çš„å­¦éœ¸</li>
</ul>
</li>
<li><p>31å·ï¼š</p>
<ul>
<li>ç¬¬åå››ç«  ç”µå½±æœ‰æ”¹ç¼–ï¼Œä¸å°è±¡ä¸­çš„æƒ…èŠ‚æœ‰å‡ºå…¥</li>
</ul>
</li>
</ul>
<h4 id="Setemper"><a href="#Setemper" class="headerlink" title="Setemper"></a>Setemper</h4><ul>
<li><p>1å·ï¼š</p>
<ul>
<li>ç¬¬åäº”ç«  é€šè¿‡å‰æœŸé“ºå«æ¸²æŸ“äº†ç´§å¼ çš„æ°›å›´ï¼Œçƒåœºä¸Šçš„å„ç§æ‘©æ“¦å†²çªï¼Œä¸€æ­¥æ­¥å°†çƒåœºæ¯”èµ›æ¨å‘äº†é«˜æ½®ï¼Œè®©äººä¹Ÿè·Ÿç€ç´§å¼ éšä¹‹æ¬¢å‘¼èµ·æ¥ã€‚ç¾ä¸­ä¸è¶³çš„æ˜¯ï¼Œè¿™ä¹ˆå†™çš„è¯ï¼ŒSlytherin çš„æ¯”èµ›æˆ˜æœ¯å¼±çˆ†äº†å§ï¼Œè¿™æ ·çš„çƒé˜Ÿå‰å‡ å¹´éƒ½èƒ½æ‹¿åˆ°å† å†›ï¼Ÿ</li>
</ul>
</li>
<li><p>2å·ï¼š</p>
<ul>
<li>ç¬¬åå…­ç«  è°œåº•å°†è¦æ­å¼€</li>
</ul>
</li>
<li><p>3å·ï¼š</p>
<ul>
<li>ç¬¬åä¸ƒç« ã€åå…«ç«  å‰§æƒ…åè½¬</li>
</ul>
</li>
<li><p>4å·ï¼š</p>
<ul>
<li>å“ˆåˆ©æ³¢ç‰¹3å®Œç»“ ä¸å¾—ä¸è¯´ï¼Œè¿™ä¸€å­£ååˆ†ç²¾å½©ï¼Œå‰§æƒ…ä¸€å†åè½¬ï¼Œæ¿€åŠ¨äººå¿ƒã€‚åˆ°æœ€åï¼Œé‚“å¸ƒåˆ©å¤šä¸€å¦‚æ—¢å¾€åœ°åœ¨æœŸæœ«çš„æ—¶å€™ä¸ºå“ˆåˆ©è§£ç–‘ç­”æƒ‘ï¼Œè¿ç”¨ä¸‰å­£çš„å¥—è·¯è®©äººä¼šå¿ƒä¸€ç¬‘ï¼ŒæœŸå¾…ç¬¬å››å­£ã€‚</li>
</ul>
</li>
<li><p>5å·ï¼š</p>
<ul>
<li>å“ˆåˆ©æ³¢ç‰¹ä¸ç«ç„°æ¯ ç¬¬ä¸€ç«  ä¸ä¸€æ ·çš„å¼€å±€ï¼Œå·®ç‚¹ä»¥ä¸ºçœ‹é”™ä¹¦äº†ã€‚</li>
</ul>
</li>
<li><p>6å·ï¼š</p>
<ul>
<li>ç¬¬äºŒç«  è¯»çš„æœ‰ç‚¹æ…¢ï¼Œè™½ç„¶å¾ˆå¤šå•è¯éƒ½è®¤è¯†ï¼Œå¯èƒ½æ˜¯å¥å­å¤æ‚äº†ï¼Œæ¬£æ…°çš„æ˜¯å¤§éƒ¨åˆ†èƒ½çœ‹æ‡‚ã€‚</li>
</ul>
</li>
<li><p>7å·ï¼š</p>
<ul>
<li>ç¬¬ä¸‰ç«  åè€Œå¿ƒç–¼ Durly äº†</li>
</ul>
</li>
<li><p>8å·ï¼š</p>
<ul>
<li>ç¬¬å››ç«  å¦‚ä½•çœ‹å¾…åˆ«äººï¼Ÿ Durlyè¯´ï¼Œçœ‹ä»–å¼€çš„è½¦ã€çœ‹ä»–ç©¿çš„è¡£æœï¼› </li>
</ul>
</li>
<li><p>9å·ï¼š</p>
<ul>
<li>ç¬¬äº”ç«  æ¶ä½œå‰§</li>
</ul>
</li>
<li><p>10å·ï¼š</p>
<ul>
<li>ç¬¬å…­ã€ä¸ƒã€å…«ç«  Hermione ä¸€ä¸ªæœ‰åŒæƒ…å¿ƒçš„äººï¼Œä¸æ¯«ä¸æ€•è¡¨è¾¾ä¸åŒè§‚ç‚¹</li>
</ul>
</li>
<li><p>11å·ï¼š</p>
<ul>
<li>ç¬¬ä¹ã€åã€åä¸€ç«  twins å®åœ¨å¤ªæœ‰è¶£äº†ï¼Œè€Œä¸”ä»–ä»¬è¿˜è®¨åŒæ´‹è…”è›‡è°ƒçš„äººï¼Œå“ªæ€•ä»–æ˜¯å…„é•¿ã€‚</li>
</ul>
</li>
<li><p>12å·ï¼š</p>
<ul>
<li>ç¬¬åäºŒç«  ç²¾å½©çš„è¿ç¯‡å°è¯´ï¼Œæ¯ä¸ªå¼€å±€éƒ½ä¸ä¸€æ ·ã€‚</li>
</ul>
</li>
<li><p>13å·ï¼š</p>
<ul>
<li>ç¬¬åä¸‰ç«  Herminone ååˆ†æ·±å—è¯¥äººç‰©å½±å“ï¼Ÿ</li>
</ul>
</li>
<li><p>14å·ï¼š</p>
<ul>
<li>ç¬¬åå››ç«  å¤„å¿ƒç§¯è™‘çš„è®¨å¥½</li>
</ul>
</li>
<li><p>15å·ï¼š</p>
<ul>
<li>ç¬¬åäº”ç«  éª„å‚²ä»ä¸é—´æ–­</li>
</ul>
</li>
<li><p>27å·ï¼š</p>
<ul>
<li>If you want to know what a manâ€™s like,take a good look at how he treats his inferiors, not his equals.</li>
</ul>
</li>
<li><p>30å·ï¼š</p>
<ul>
<li>Curiosity is not a sin.</li>
</ul>
</li>
</ul>
<h4 id="October"><a href="#October" class="headerlink" title="October"></a>October</h4><ul>
<li>4å·ï¼š<ul>
<li>Whatâ€™s coming will come, and weâ€™ll meet it when it does.</li>
<li>ç«ç„°æ¯å®Œç»“.</li>
</ul>
</li>
</ul>

        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/ç”Ÿæ´»/">ç”Ÿæ´»</a>
</div>


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>






   
    
    <article class="post-expand post" itemprop="articleBody"> 
        <header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/08/13/hello-world/" title="Hello World" itemprop="url">Hello World</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="Joey" target="_blank" itemprop="author">Joey</a>
		
  <p class="article-time">
    <time datetime="2016-08-13T15:55:10.000Z" itemprop="datePublished"> Published 2016-08-13</time>
    
  </p>
</header>
    <div class="article-content">
        
        <p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html">Deployment</a></p>
<h3 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h3>
        
        
        <p class="article-more-link">
          
       </p>
    </div>
    <footer class="article-footer clearfix">
<div class="article-catetags">


</div>




<div class="comments-count">
	
</div>

</footer>


    </article>







</div>
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/iOSç¼–ç¨‹/" title="iOSç¼–ç¨‹">iOSç¼–ç¨‹<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç”Ÿæ´»/" title="ç”Ÿæ´»">ç”Ÿæ´»<sup>2</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/iOS/" title="iOS">iOS<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/HTTP-iOS/" title="HTTP , iOS">HTTP , iOS<sup>1</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://jacman.wuchong.me/2014/11/20/how-to-use-jacman/" target="_blank" title="å¦‚ä½•ä½¿ç”¨ Jacman ä¸»é¢˜">å¦‚ä½•ä½¿ç”¨ Jacman ä¸»é¢˜</a>
            
          </li>
        
    </ul>
</div>

  


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Joey. <br/>
			</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> Â© 2017 
		
		<a href="/about" target="_blank" title="Joey">Joey</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
        
    }
  });
});
</script>










<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
 </html>
